GetGroceryOrder: # GetGroceryOrder

  DocumentData: # GetGroceryOrder/DocumentData
    Document: # GetGroceryOrder/DocumentData/Document
      VersionId: # GetGroceryOrder/DocumentData/Document/@VersionId
        assignment: VERSION_ID
      SystemEnvironmentCd: # GetGroceryOrder/DocumentData/Document/@SystemEnvironmentCd
        assignment: SYSTEM_ENVIRONMENT_CODE
      DocumentID: # GetGroceryOrder/DocumentData/Document/DocumentID
        assignment: "'GROCERY_ORDER'"
      AlternateDocumentID: # GetGroceryOrder/DocumentData/Document/AlternateDocumentID
        assignment: "'OSCO_ESED_C02_ORDER-' || CAST(CURRENT_TIMESTAMP AS CHARACTER FORMAT 'YYYYMMddHHmmssSSSSSS')"
      DocumentNm: # GetGroceryOrder/DocumentData/Document/DocumentNm
        assignment: "'GroceryOrder'"
      CreationDt: # GetGroceryOrder/DocumentData/Document/CreationDt
        assignment: CURRENT_TIMESTAMP
      Description: # GetGroceryOrder/DocumentData/Document/Description
        assignment: "'GroceryOrderDetail'"
      SourceApplicationCd: # GetGroceryOrder/DocumentData/Document/SourceApplicationCd
        assignment: "'OMS'"
      TargetApplicationCd: # GetGroceryOrder/DocumentData/Document/TargetApplicationCd
        assignment: "'EDIS'"
      SenderId: # GetGroceryOrder/DocumentData/Document/SenderId
        assignment: $.id
      InternalFileTransferInd: # GetGroceryOrder/DocumentData/Document/InternalFileTransferInd
        assignment: "'Y'"
      DataClassification: # GetGroceryOrder/DocumentData/Document/DataClassification
        DataClassificationLevel: # GetGroceryOrder/DocumentData/Document/DataClassification/DataClassificationLevel
          Code: # GetGroceryOrder/DocumentData/Document/DataClassification/DataClassificationLevel/Code
            assignment: "'Internal'"
        BusinessSensitivityLevel: # GetGroceryOrder/DocumentData/Document/DataClassification/BusinessSensitivityLevel
          Code: # GetGroceryOrder/DocumentData/Document/DataClassification/BusinessSensitivityLevel/Code
            assignment: "'Low'"
        PHIdataInd: # GetGroceryOrder/DocumentData/Document/DataClassification/PHIdataInd
          assignment: "'N'"
        PCIdataInd: # GetGroceryOrder/DocumentData/Document/DataClassification/PCIdataInd
          assignment: "'Y'"
        PIIdataInd: # GetGroceryOrder/DocumentData/Document/DataClassification/PIIdataInd
          assignment: "'Y'"
    DocumentAction: # GetGroceryOrder/DocumentData/DocumentAction
      ActionTypeCd: # GetGroceryOrder/DocumentData/DocumentAction/ActionTypeCd
        assignment: "'UPDATE'"
      RecordTypeCd: # GetGroceryOrder/DocumentData/DocumentAction/RecordTypeCd
        assignment: "'CHANGE'"

  GroceryOrderData: # GetGroceryOrder/GroceryOrderData
    GroceryOrderHeader: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader
      OrderId: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/OrderId
        assignment: $.orderNumber
      OrderCreateTS: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/OrderCreateTS
        assignment: $.orderCreatedDate
      CompanyId: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/CompanyId
        assignment: $.companyId
      VersionNbr: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/VersionNbr
        assignment: $.versionNumber
      OrderStatus: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/OrderStatus
        StatusTypeCd: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/OrderStatus/StatusTypeCd
          assignment: $.orderStatus
      OrderStatusReasonType: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/OrderStatusReasonType
        Code: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/OrderStatusReasonType/Code
          assignment: $.orderStatusReasonCode
      OrderActionStatus: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/OrderActionStatus
        StatusTypeCd: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/OrderActionStatus/StatusTypeCd
          assignment: $.messageAction
        Description: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/OrderActionStatus/Description
          assignment: $.messageActionReason
      EditCutoffDtTm: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/EditCutoffDtTm
        assignment: $.orderEditCutoffDate
      EditReasonType: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/EditReasonType
        Code: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/EditReasonType/Code
          assignment: $.modifiedReasonCode

      FulfillingFacility: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/FulfillingFacility
        procedure://ConstructFulfillingFacility(_inputRootNode, FulfillingFacility_, GroceryOrderHeader_):
          RetailStoreId: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/FulfillingFacility/RetailStoreId
            assignment: $.storeNumber
          BannerCd: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/FulfillingFacility/BannerCd
            assignment: $.banner
          MFCInd: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/FulfillingFacility/MFCInd
            assignment: "'???'"
          HybridStoreInd: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/FulfillingFacility/HybridStoreInd
            assignment: "'???'"
          PremiumStoreInd: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/FulfillingFacility/PremiumStoreInd
            assignment: "'???'"
          ThirdPartyDeliveryOnlyInd: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/FulfillingFacility/ThirdPartyDeliveryOnlyInd
            assignment: "'???'"
          ERUMSEnabledInd: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/FulfillingFacility/ERUMSEnabledInd
            assignment: "'???'"

      RetailCustomer: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/RetailCustomer
        CustomerId: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/RetailCustomer/CustomerId
          assignment: $.customer.customerId
        CustomerAlternateId: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/RetailCustomer/CustomerAlternateId
          sequenceNbr: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/RetailCustomer/CustomerAlternateId/@sequenceNbr
            assignment: $.customer.memberId
        CustomerNm: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/RetailCustomer/CustomerNm
          GivenNm: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/RetailCustomer/CustomerNm/GivenNm
            assignment: $.customer.name.firstName
          MiddleNm: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/RetailCustomer/CustomerNm/MiddleNm
            assignment: $.customer.name.middleName
          FamilyNm: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/RetailCustomer/CustomerNm/FamilyNm
            assignment: $.customer.name.lastName

        Contact: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/RetailCustomer/Contact
          - loop:contact://customer.contact[*]/_contact:
              PhoneFaxContact: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/RetailCustomer/Contact/PhoneFaxContact
                TypeCode: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/RetailCustomer/Contact/PhoneFaxContact/@TypeCode
                  assignment: _contact.type
                PhoneNbrTxt: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/RetailCustomer/Contact/PhoneFaxContact/PhoneNbrTxt
                  assignment: _contact.number
                PhonePurposes: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/RetailCustomer/Contact/PhoneFaxContact/PhonePurposes
                  PurposeDsc: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/RetailCustomer/Contact/PhoneFaxContact/PhonePurposes/PurposeDsc
                    assignment: _contact.number

          - loop:email://customer.email[*]/_email:
              DigitalContact: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/RetailCustomer/Contact/DigitalContact
                DigitalAddress: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/RetailCustomer/Contact/DigitalContact/DigitalAddress
                  assignment: _email.id
                EmailStatuses: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/RetailCustomer/Contact/DigitalContact/EmailStatuses
                  typeCode: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/RetailCustomer/Contact/DigitalContact/EmailStatuses/@typeCode
                    assignment: _email.type

          - loop:address://customer.address[*]/_address:
              Address: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/RetailCustomer/Contact/Address
                AddressUsageTypeCd: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/RetailCustomer/Contact/Address/AddressUsageTypeCd
                  assignment: _address.addressType
                AddressLine1txt: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/RetailCustomer/Contact/Address/AddressLine1txt
                  assignment: _address.addressLine1
                AddressLine2txt: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/RetailCustomer/Contact/Address/AddressLine2txt
                  assignment: _address.addressLine2
                CityNm: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/RetailCustomer/Contact/Address/CityNm
                  assignment: _address.city
                PostalZoneCd: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/RetailCustomer/Contact/Address/PostalZoneCd
                  assignment: _address.zipCode
                StateCd: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/RetailCustomer/Contact/Address/StateCd
                  assignment: _address.state
                CountryCd: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/RetailCustomer/Contact/Address/CountryCd
                  assignment: _address.country

        ClubCardNbr: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/RetailCustomer/ClubCardNbr
          assignment: $.customer.clubCardNumber

        CustomerPreference: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/RetailCustomer/CustomerPreference
          - loop:optIn://customer.preference.optIn[*]/_optIn:
              PreferenceType: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/RetailCustomer/CustomerPreference/PreferenceType
                Code: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/RetailCustomer/CustomerPreference/PreferenceType/Code
                  assignment: _optIn.type
              OptInContactNbr: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/RetailCustomer/CustomerPreference/OptInContactNbr
                assignment: _optIn.id
              OptInInd: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/RetailCustomer/CustomerPreference/OptInInd
                assignment: _optIn.isOptin


        CustomerSubscription: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/RetailCustomer/CustomerSubscription
          SubscriptionTypeCd: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/RetailCustomer/CustomerSubscription/SubscriptionTypeCd
            assignment: "'???'"
          OptInInd: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/RetailCustomer/CustomerSubscription/OptInInd
            assignment: $.customer.isSubscription

      CurrencyCd: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/CurrencyCd
        assignment: $.orderTotal.currency
      TotalAmt: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/TotalAmt
        assignment: CAST($.orderTotal.amount AS DECIMAL(10, 2))

      CustomerOffers: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/CustomerOffers
        - loop:txnLevelSaving://orderTotal.txnLevelSavings[*]/_txnLevelSaving:
            OfferId: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/CustomerOffers/OfferId
              assignment: _txnLevelSaving.offerId
            ReferenceOfferId: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/CustomerOffers/ReferenceOfferId
              assignment: _txnLevelSaving.externalOfferId

      CustomerPayment: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/CustomerPayment

        Tender: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/CustomerPayment/Tender
          - loop:paymentDetails://paymentDetails[*]/_paymentDetails:
              TenderId: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/CustomerPayment/Tender/TenderId
                assignment: _paymentDetails.tokenNumber
              TenderTypeCd: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/CustomerPayment/Tender/TenderTypeCd
                assignment: _paymentDetails.paymentType
              TenderSubTypeCd: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/CustomerPayment/Tender/TenderSubTypeCd
                assignment: _paymentDetails.paymentSubType
              HolderNm: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/CustomerPayment/Tender/HolderNm
                assignment: _paymentDetails.cardHolderName
              ExpireMonthYearTxt: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/CustomerPayment/Tender/ExpireMonthYearTxt
                assignment: _paymentDetails.cardExpiryMonth
              BillingAddress: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/CustomerPayment/Tender/BillingAddress
                AddressLine1txt: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/CustomerPayment/Tender/BillingAddress/AddressLine1txt
                  assignment: _paymentDetails.address.addressLine1
                AddressLine2txt: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/CustomerPayment/Tender/BillingAddress/AddressLine2txt
                  assignment: _paymentDetails.address.addressLine2
                CityNm: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/CustomerPayment/Tender/BillingAddress/CityNm
                  assignment: _paymentDetails.address.city
                PostalZoneCd: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/CustomerPayment/Tender/BillingAddress/PostalZoneCd
                  assignment: _paymentDetails.address.zipCode
                StateCd: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/CustomerPayment/Tender/BillingAddress/StateCd
                  assignment: _paymentDetails.address.state
              PostalCd: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/CustomerPayment/Tender/PostalCd
                assignment: _paymentDetails.zipcode
              Token: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/CustomerPayment/Tender/Token
                TokenId: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/CustomerPayment/Tender/Token/TokenId
                  assignment: _paymentDetails.tokenNumber
                TokenTypeCd: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/CustomerPayment/Tender/Token/TokenTypeCd
                  assignment: _paymentDetails.paymentType
              Status: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/CustomerPayment/Tender/Status
                StatusCd: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/CustomerPayment/Tender/Status/StatusCd
                  assignment: _paymentDetails.paymentStatus.status
              RequiredAuthAmt: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/CustomerPayment/Tender/RequiredAuthAmt
                assignment: CAST(_paymentDetails.reqAuthorizationAmount AS DECIMAL(10, 2))
              AuthCd: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/CustomerPayment/Tender/AuthCd
                assignment: _paymentDetails.paymentStatus.authorizationCode
              AuthDt: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/CustomerPayment/Tender/AuthDt
                assignment: _paymentDetails.paymentStatus.authorizationDate

          - loop:tender://tender[*]/_tender:

      CustomerSavings: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/CustomerSavings
        TotalCustomerSavingsAmt: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/CustomerSavings/TotalCustomerSavingsAmt
          assignment: CAST($.orderTotal.totalCardSavings AS DECIMAL(10, 2))

        SavingsCategoryType: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/CustomerSavings/SavingsCategoryType
          - loop:card_savings://orderTotal.cardSavings[*]/_card_savings:
              SavingsCategoryId: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/CustomerSavings/SavingsCategoryType/SavingsCategoryId
                assignment: _card_savings.savingsCategoryId
              SavingsCategoryNm: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/CustomerSavings/SavingsCategoryType/SavingsCategoryNm
                assignment: _card_savings.savingsCategoryName
              SavingsAmt: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/CustomerSavings/SavingsCategoryType/SavingsAmt
                assignment: CAST(_card_savings.savingsAmount AS DECIMAL(10, 2))

      OrderRecordDateInfo: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/OrderRecordDateInfo
        CreateDtTm: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/OrderRecordDateInfo/CreateDtTm
          assignment: $.audit.createDate
        CreateUserId: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/OrderRecordDateInfo/CreateUserId
          assignment: $.sourceInfo.enteredBy
        UpdateDtTm: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/OrderRecordDateInfo/UpdateDtTm
          assignment: $.audit.modifiedDate
        UpdateUserId: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/OrderRecordDateInfo/UpdateUserId
          assignment: $.audit.modifiedBy
      Device: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/Device
        Code: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/Device/Code
          assignment: $.sourceInfo.deviceType
      OrderCreatedDeviceType: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/OrderCreatedDeviceType
        Code: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/OrderCreatedDeviceType/Code
          assignment: $.sourceInfo.deviceType

      CustomerNotesTxt: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/CustomerNotesTxt
        - loop:order_info_data://orderInfo.data[*]/_order_info_data:
            typeCode: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/CustomerNotesTxt/@typeCode
              assignment: $.orderInfo.data.Item

      AffiliatePartnerType: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/AffiliatePartnerType
        AffiliatePartnerNm: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/AffiliatePartnerType/AffiliatePartnerNm
          assignment: $.sourceInfo.affiliate.affiliateName
        OrderReferenceTxt: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/AffiliatePartnerType/OrderReferenceTxt
          assignment: $.sourceInfo.affiliate.affiliateOrderRef
      OrderSourceSystemType: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/OrderSourceSystemType
        Code: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/OrderSourceSystemType/Code
          assignment: $.sourceInfo.source
      FulFillmentSystemType: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/FulFillmentSystemType
        Code: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/FulFillmentSystemType/Code
          assignment: $.fulfillmentSystem

      GroceryOrderProfileType: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/GroceryOrderProfileType
        procedure://ConstructGroceryOrderProfileType(_inputRootNode, GroceryOrderProfileType_):
          ProfileType: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/GroceryOrderProfileType/ProfileType
            Code: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/GroceryOrderProfileType/ProfileType/Code
              assignment: "'taxExempt'"
            Description: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/GroceryOrderProfileType/ProfileType/Description
              assignment: "'???'"
          ProfileValueInd: # GetGroceryOrder/GroceryOrderData/GroceryOrderHeader/GroceryOrderProfileType/ProfileValueInd
            assignment: "'???'"


    GrocerySubOrder: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder
      - loop:subOrder://subOrders[*]/_subOrder:
          SubOrderNbr: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/SubOrderNbr
            assignment: _subOrder.subOrderNumber
          SubOrderStatus: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/SubOrderStatus
            StatusTypeCd: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/SubOrderStatus/StatusTypeCd
              assignment: _subOrder.subOrderStatus
          StatusReasonType: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/StatusReasonType
            Code: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/StatusReasonType/Code
              assignment: _subOrder.subOrderStatusReasonCode
          SubOrderActionStatus: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/SubOrderActionStatus
            StatusTypeCd: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/SubOrderActionStatus/StatusTypeCd
              assignment: _subOrder.messageAction
            Description: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/SubOrderActionStatus/Description
              assignment: _subOrder.messageActionReason
          SubOrderServiceLevelType: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/SubOrderServiceLevelType
            Code: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/SubOrderServiceLevelType/Code
              assignment: _subOrder.subOrderType.serviceLevel
          CancelByDtTm: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/CancelByDtTm
            assignment: _subOrder.cancelByDate

          GroceryOrderDetail: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/GroceryOrderDetail
            - loop:orderLine://subOrders[*].orderLines[*]/_orderLine:
                CartLineNbr: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/GroceryOrderDetail/CartLineNbr
                  assignment: _orderLine.itemPrice.entryId
                ItemId: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/GroceryOrderDetail/ItemId
                  SystemSpecificItemId: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/GroceryOrderDetail/ItemId/SystemSpecificItemId
                    assignment: _orderLine.itemId
                  InternalItemId: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/GroceryOrderDetail/ItemId/InternalItemId
                    assignment: _orderLine.itemPrice.itemCode
                  BaseProductNbr: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/GroceryOrderDetail/ItemId/BaseProductNbr
                    assignment: CAST(_orderLine.itemId AS DECIMAL(14, 0))
                  ItemDescription: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/GroceryOrderDetail/ItemId/ItemDescription
                    assignment: _orderLine.itemDescription
                UnitPriceAmt: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/GroceryOrderDetail/UnitPriceAmt
                  assignment: CAST(_orderLine.unitPrice.amount AS DECIMAL(14, 4))
                ExtendedUnitPriceAmt: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/GroceryOrderDetail/ExtendedUnitPriceAmt
                  assignment: CAST(_orderLine.itemPrice.extendedPrice AS DECIMAL(14, 4))
                PriceEffectiveEndDtTm: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/GroceryOrderDetail/PriceEffectiveEndDtTm
                  assignment: _orderLine.itemPrice.endDate
                Quantity: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/GroceryOrderDetail/Quantity
                  assignment: CAST(_orderLine.orderedQuantity AS DECIMAL(14, 4))
                UOM: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/GroceryOrderDetail/UOM
                  UOMCd: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/GroceryOrderDetail/UOM/UOMCd
                    assignment: _orderLine.unitOfMeasure
                DiscountAllowedInd: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/GroceryOrderDetail/DiscountAllowedInd
                  assignment: _orderLine.itemPrice.discountAllowed
                RewardAllowedInd: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/GroceryOrderDetail/RewardAllowedInd
                  assignment: _orderLine.itemPrice.pointsApplyItem
                SubstitutionType: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/GroceryOrderDetail/SubstitutionType
                  Code: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/GroceryOrderDetail/SubstitutionType/Code
                    assignment: _orderLine.substitutionCode
                  Description: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/GroceryOrderDetail/SubstitutionType/Description
                    assignment: _orderLine.substitutionValue
                CurrencyCd: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/GroceryOrderDetail/CurrencyCd
                  assignment: _orderLine.unitPrice.currency
                RegulatedItemInd: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/GroceryOrderDetail/RegulatedItemInd
                  assignment: _orderLine.isRegulatedItem
                LinkPLUNbr: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/GroceryOrderDetail/LinkPLUNbr
                  assignment: _orderLine.itemPrice.linkPluNumber
                CouponPLUNbr: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/GroceryOrderDetail/CouponPLUNbr
                  assignment: _orderLine.itemPrice.itemPluNumber

                CustomerOffers: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/GroceryOrderDetail/CustomerOffers
                  - loop:customer_savings_loop://subOrders[*].orderLines[*].itemPrice.savings[*]/_customer_savings:
                      OfferId: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/GroceryOrderDetail/CustomerOffers/OfferId
                        assignment: _customer_savings.offerId
                      ReferenceOfferId: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/GroceryOrderDetail/CustomerOffers/ReferenceOfferId
                        assignment: _customer_savings.externalOfferId
                      OfferSourceType: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/GroceryOrderDetail/CustomerOffers/OfferSourceType
                        Code: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/GroceryOrderDetail/CustomerOffers/OfferSourceType/Code
                          assignment: _customer_savings.source

                      CustomerRewards: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/GroceryOrderDetail/CustomerOffers/CustomerRewards
                        - loop:points_loop://subOrders[*].orderLines[*].itemPrice.savings[*].points[*]/_point:
                            RewardsProgramNm: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/GroceryOrderDetail/CustomerOffers/CustomerRewards/RewardsProgramNm
                              assignment: _point.programName
                            EarnedQty: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/GroceryOrderDetail/CustomerOffers/CustomerRewards/EarnedQty
                              assignment: _point.earn
                            UsedQty: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/GroceryOrderDetail/CustomerOffers/CustomerRewards/UsedQty
                              assignment: _point.burn


                Department: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/GroceryOrderDetail/Department
                  Code: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/GroceryOrderDetail/Department/Code
                    assignment: _orderLine.itemPrice.department
                WICItemInd: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/GroceryOrderDetail/WICItemInd
                  assignment: _orderLine.itemPrice.wic

                DeliveredItem: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/GroceryOrderDetail/DeliveredItem
                  - loop:fulfilled_upc_loop://subOrders[*].orderLines[*].fulfilledUpc[*]/_fulfilled_upc:
                      DeliveredItemLineNbr: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/GroceryOrderDetail/DeliveredItem/DeliveredItemLineNbr
                        assignment: _fulfilled_upc.itemPrice.entryId
                      Item: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/GroceryOrderDetail/DeliveredItem/Item
                        UPC: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/GroceryOrderDetail/DeliveredItem/Item/UPC
                          UPCNbr: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/GroceryOrderDetail/DeliveredItem/Item/UPC/UPCNbr
                            assignment: CAST(_fulfilled_upc.upcId AS DECIMAL(14, 0))
                        InternalItemId: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/GroceryOrderDetail/DeliveredItem/Item/InternalItemId
                          assignment: _fulfilled_upc.itemPrice.itemCode
                      SubstitutedItemInd: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/GroceryOrderDetail/DeliveredItem/SubstitutedItemInd
                        assignment: _fulfilled_upc.isSubstituted
                      Quantity: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/GroceryOrderDetail/DeliveredItem/Quantity
                        assignment: CAST(_fulfilled_upc.upcQuantity AS DECIMAL(14, 4))
                      UOM: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/GroceryOrderDetail/DeliveredItem/UOM
                        UOMCd: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/GroceryOrderDetail/DeliveredItem/UOM/UOMCd
                          assignment: _fulfilled_upc.itemPrice.quantityType
                      ExtendedUnitPriceAmt: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/GroceryOrderDetail/DeliveredItem/ExtendedUnitPriceAmt
                        assignment: CAST(_fulfilled_upc.itemPrice.extendedPrice AS DECIMAL(14, 4))
                      PriceEffectiveEndDtTm: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/GroceryOrderDetail/DeliveredItem/PriceEffectiveEndDtTm
                        assignment: _fulfilled_upc.itemPrice.endDate
                      LinkPLUNbr: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/GroceryOrderDetail/DeliveredItem/LinkPLUNbr
                        assignment: _fulfilled_upc.itemPrice.linkPluNumber
                      CouponPLUNbr: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/GroceryOrderDetail/DeliveredItem/CouponPLUNbr
                        assignment: _fulfilled_upc.itemPrice.itemPluNumber
                      PromotionPriceAmt: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/GroceryOrderDetail/DeliveredItem/PromotionPriceAmt
                        assignment: CAST(_fulfilled_upc.itemPrice.netPromotionAmount AS DECIMAL(14, 4))

                      CustomerOffers: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/GroceryOrderDetail/DeliveredItem/CustomerOffers
                        - loop:fulfilled_upc_savings_loop://subOrders[*].orderLines[*].fulfilledUpc[*].itemPrice.savings[*]/_fulfilled_upc_savings:
                            OfferId: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/GroceryOrderDetail/DeliveredItem/CustomerOffers/OfferId
                              assignment: _fulfilled_upc_savings.offerId
                            ReferenceOfferId: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/GroceryOrderDetail/DeliveredItem/CustomerOffers/ReferenceOfferId
                              assignment: _fulfilled_upc_savings.externalOfferId
                            OfferSourceType: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/GroceryOrderDetail/DeliveredItem/CustomerOffers/OfferSourceType
                              Code: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/GroceryOrderDetail/DeliveredItem/CustomerOffers/OfferSourceType/Code
                                assignment: _fulfilled_upc_savings.source

                            CustomerRewards: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/GroceryOrderDetail/DeliveredItem/CustomerOffers/CustomerRewards
                              - loop:fulfilled_upc_savings_points_loop://subOrders[*].orderLines[*].fulfilledUpc[*].itemPrice.savings[*].points[*]/_fulfilled_upc_savings_point:
                                  RewardsProgramNm: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/GroceryOrderDetail/DeliveredItem/CustomerOffers/CustomerRewards/RewardsProgramNm
                                    assignment: _fulfilled_upc_savings_point.programName
                                  EarnedQty: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/GroceryOrderDetail/DeliveredItem/CustomerOffers/CustomerRewards/EarnedQty
                                    assignment: _fulfilled_upc_savings_point.earn
                                  UsedQty: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/GroceryOrderDetail/DeliveredItem/CustomerOffers/CustomerRewards/UsedQty
                                    assignment: _fulfilled_upc_savings_point.burn


                      RewardAllowedInd: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/GroceryOrderDetail/DeliveredItem/RewardAllowedInd
                        assignment: _fulfilled_upc.itemPrice.pointsApplyItem
                      DiscountAllowedInd: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/GroceryOrderDetail/DeliveredItem/DiscountAllowedInd
                        assignment: _fulfilled_upc.itemPrice.discountAllowed
                      WICItemInd: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/GroceryOrderDetail/DeliveredItem/WICItemInd
                        assignment: _fulfilled_upc.itemPrice.wic

                OrderQty: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/GroceryOrderDetail/OrderQty
                  assignment: CAST(_orderLine.orderedQuantity AS DECIMAL(14, 4))
                FulfilledQty: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/GroceryOrderDetail/FulfilledQty
                  assignment: CAST(_orderLine.fulfilledQuantity AS DECIMAL(14, 4))

            - loop:promoCode://subOrders[*].promoCodes[*]/_promoCode:
                PromotionType: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/GroceryOrderDetail/PromotionType
                  Code: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/GroceryOrderDetail/PromotionType/Code
                    assignment: _promoCode.code
                  Description: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/GroceryOrderDetail/PromotionType/Description
                    assignment: _promoCode.description
                PromotionTriggerCd: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/GroceryOrderDetail/PromotionTriggerCd
                  assignment: _promoCode.pluCode

          FullFillmentType: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/FullFillmentType
            Code: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/FullFillmentType/Code
              assignment: _subOrder.fulfillmentType
          PickupInfo: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/PickupInfo
            ShortOrderNbr: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/PickupInfo/ShortOrderNbr
              assignment: _subOrder.deliveryInfo.pickupInfo.shortOrderNumber
            PickupSlot: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/PickupInfo/PickupSlot
              Code: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/PickupInfo/PickupSlot/Code
                assignment: _subOrder.deliveryInfo.pickupInfo.locationId
            PickupSlotType: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/PickupInfo/PickupSlotType
              Code: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/PickupInfo/PickupSlotType/Code
                assignment: _subOrder.deliveryInfo.pickupInfo.locationType
            DisplayEndDttm: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/PickupInfo/DisplayEndDttm
              assignment: _subOrder.deliveryInfo.slotInfo.lastPickupTime
            CustomerInstructionTxt: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/PickupInfo/CustomerInstructionTxt
              assignment: _orderLine.comments
          DeliveryInfo: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/DeliveryInfo
            CustomerType: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/DeliveryInfo/CustomerType
              Code: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/DeliveryInfo/CustomerType/Code
                assignment: _subOrder.deliveryInfo.deliverySubType
            DeliverySlotId: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/DeliveryInfo/DeliverySlotId
              assignment: _subOrder.deliveryInfo.slotInfo.slotId
            DeliverySlotType: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/DeliveryInfo/DeliverySlotType
              Code: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/DeliveryInfo/DeliverySlotType/Code
                assignment: _subOrder.deliveryInfo.slotInfo.slotType
            DeliveryServiceType: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/DeliveryInfo/DeliveryServiceType
              Code: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/DeliveryInfo/DeliveryServiceType/Code
                assignment: _subOrder.deliveryInfo.deliveryServiceType
            SlotPlan: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/DeliveryInfo/SlotPlan
              Code: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/DeliveryInfo/SlotPlan/Code
                assignment: _subOrder.deliveryInfo.slotInfo.slotPlan
            StartDttm: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/DeliveryInfo/StartDttm
              assignment: _subOrder.deliveryInfo.slotInfo.startTime
            EndDttm: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/DeliveryInfo/EndDttm
              assignment: _subOrder.deliveryInfo.slotInfo.endTime
            SlotExpiryDttm: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/DeliveryInfo/SlotExpiryDttm
              assignment: _subOrder.deliveryInfo.slotInfo.endTime
            StageByDttm: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/DeliveryInfo/StageByDttm
              assignment: _subOrder.deliveryInfo.stageByDateTime
            EditCutoffDtTm: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/DeliveryInfo/EditCutoffDtTm
              assignment: _subOrder.deliveryInfo.slotInfo.editingCutoffDate
            CustomerInstructionTxt: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/DeliveryInfo/CustomerInstructionTxt
              assignment: _subOrder.deliveryInfo.instructions
            DeliveryTimeZoneCd: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/DeliveryInfo/DeliveryTimeZoneCd
              assignment: _subOrder.deliveryInfo.slotInfo.timeZone

          ChargeInfo: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/ChargeInfo
            - loop:charge://subOrders[*].charges[*]/_charge:
                Charge: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/ChargeInfo/Charge
                  Code: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/ChargeInfo/Charge/Code
                    assignment: _charge.id
                  Description: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/ChargeInfo/Charge/Description
                    assignment: _charge.name
                ChargeCategory: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/ChargeInfo/ChargeCategory
                  Code: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/ChargeInfo/ChargeCategory/Code
                    assignment: _charge.category
                ChargeAmt: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/ChargeInfo/ChargeAmt
                  assignment: CAST(_charge.chargeAmount.amount AS DECIMAL(10, 2))
                CurrencyCd: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/ChargeInfo/CurrencyCd
                  assignment: _charge.chargeAmount.currency


          CustomerService: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/CustomerService
            - loop:service_contact://subOrders[*].customerService.contact[*]/_service_contact:
                PhoneFaxContact: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/CustomerService/PhoneFaxContact
                  TypeCode: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/CustomerService/PhoneFaxContact/@TypeCode
                    assignment: _service_contact.type
                  PhoneNbrTxt: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/CustomerService/PhoneFaxContact/PhoneNbrTxt
                    assignment: _service_contact.number
                  PhonePurposes: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/CustomerService/PhoneFaxContact/PhonePurposes
                    PurposeDsc: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/CustomerService/PhoneFaxContact/PhonePurposes/PurposeDsc
                      assignment: _service_contact.subType

          ShoppingBagCnt: # GetGroceryOrder/GroceryOrderData/GrocerySubOrder/ShoppingBagCnt
            assignment: _subOrder.tote.totalNumberOfBagsUsed

