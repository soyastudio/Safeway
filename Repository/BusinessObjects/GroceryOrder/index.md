# Design
## Flow Chart
``` mermaid
graph LR
  subgraph SRC1 [ERUMS]
    ERUMS
  end
    
    ERUMS --> AKS
    AKS --> KIT

  subgraph SRC2 [OMS]
    OMS
  end

    OMS --> AKS2
    AKS2 --> KIT2

  subgraph EDIS [EDIS - GroceryOrder]
    KIT --> |<Json Data>|IIB
    IIB --> |<CMM XML>|KOT
    
    KIT2 --> |<Json Data>|IIB2
    IIB2 --> |<CMM XML>|KOT
  end

    KOT --> AKT
    AKT --> END

  subgraph TGT [EDM]
    END
  end

  ERUMS((ERUMS))
  AKS[(Azure Kafka ERUMS SRC)]

  OMS((OMS))
  AKS2[(Azure Kafka OMS SRC)]

  KIT[(Kafka ERUMS SRC Topic)]
  IIB[ESED_GroceryOrder_ERUMS_IH_Publisher]

  
  KIT2[(Kafka OMS SRC Topic)]
  IIB2[ESED_GroceryOrder_OMS_IH_Publisher]

  KOT[(Kafka Producer Topic)]

  AKT[(Azure Kafka TGT)]
  END((Consumer))         

```


# RIT

## DEV:
RITM0701516

## QA:
RITM0702864

## PROD:
RITM0713755


# DEV
## 1. ssh dgv012efa

    su - esd02ed
    password: #Today@321!

    cd /appl/esed/kafka


## 2. Publish Message
    java -cp edis-kafka-0.0.2-SNAPSHOT-jar-with-dependencies.jar message.Producer {TOPIC_NAME} {key}.txt '{MSG}'

    java -cp edis-kafka-0.0.2-SNAPSHOT-jar-with-dependencies.jar message.Producer OSMS-EMOM_C02_ORDER AnjanaAccount.txt '{"orderNumber":"20023743","versionNumber":2,"orderStatus":"CREATED","messageAction":"CREATED","messageActionReason ":"CUS_RESCHEDULE_CANCEL","companyId":"1","banner":"Safeway","storeNumber":"3116","orderCreatedDate":"2020-07-07T18:39:40.317Z","sourceInfo":{"source":"ECOMMERCE","enteredBy":"CUSTOMER","deviceType":"WEB","affiliate":{"affiliateName":"IBOTTA","affiliateOrderRef":"A123544334-123"}},"orderTotal":{"amount":44.38,"currency":"USD"},"customer":{"customerId":"556-030-1588631734xxx","clubCardNumber":"49192969xxx","isSubscription":false,"name":{"firstName":"xxx","lastName":"xxx"},"address":[{"addressType":"SHIP-TO","addressLine1":"xxx Hazelwood Dr","addressLine2":"xxx Hazelwood Drive","city":"South San Francisco","state":"CA","zipCode":"94080","country":"USA"}],"contact":[{"number":"636459xxxx","type":"MOBILE"}],"email":[{"id":"xxx@gmail.com","type":"PERSONAL"}],"preference":{"optIn":[{"type":"TEXT","id":"6364590xxx","isOptin":true}]}},"paymentDetails":[{"paymentType":"CREDITCARD","paymentSubType":"MASTERCARD","tokenNumber":"1811400206461002","cardExpiryMonth":"12","cardExpiryYear":"25","zipcode":"60015","reqAuthorizationAmount":"44.38","cardHolderName":"MASTERCARD","address":{"zipCode":"60015"},"paymentStatus":{"status":"NOTAUTHORIZED","authorizationCode":"ET154338","authorizationDate":"2020-07-07T18:39:40.339Z"}}],"subOrders":[{"subOrderNumber":1,"messageAction":"UPDATE","messageActionReason":"RESCHEDULE_SLOT","fulfillmentType":"DELIVERY","customerService":{"contact":[{"number":"7843793105","type":"MOBILE","subType":"CUST_SERV_PHONE"}]},"deliveryInfo":{"deliverySubType":"RESIDENTIAL","slotInfo":{"slotPlan":"STANDARD","slotType":"TWOHR","slotId":"1b9f3a65-2d2e-4bfa-9e3b-a27c454272d8","timeZone":"America/Los_Angeles","startTime":"2020-07-08T01:00:00.000Z","endTime":"2020-07-08T03:00:00.000Z","editingCutoffDate":"2020-07-07T21:00:00.000Z"},"deliveryServiceType":"ATTENDED","instructions":"Leave at the door step","stageByDateTime":"2020-07-08T03:00:00.000Z"},"charges":[{"id":"0000000029103","name":"BagFee","category":"ServiceFee","chargeAmount":{"amount":0.1,"currency":"USD"}},{"id":"0000000022151","name":"DeliveryFee","category":"DeliveryFee","chargeAmount":{"amount":5.95,"currency":"USD"}}],"promoCodes":[],"orderLines":[{"itemId":"960037176","itemDescription":"Signature SELECT/Refreshe Soda Cola Zero - 12-12 Fl. Oz.","orderedQuantity":2,"unitOfMeasure":"Fz ","unitPrice":{"amount":3.99,"currency":"USD"},"substitutionCode":"2","substitutionValue":"Same Brand Diff Size","isRegulatedItem":false},{"itemId":"960008285","itemDescription":"Fresh Baked Garlic Parmesan Sourdough Bread","orderedQuantity":3,"unitOfMeasure":"Ea ","unitPrice":{"amount":3.49,"currency":"USD"},"substitutionCode":"2","substitutionValue":"Same Brand Diff Size","isRegulatedItem":false},{"itemId":"188100176","itemDescription":"Ground Beef 93% Lean 7% Fat - 1.25 Lbs","orderedQuantity":2,"unitOfMeasure":"Lb ","unitPrice":{"amount":9.99,"currency":"USD"},"substitutionCode":"2","substitutionValue":"Same Brand Diff Size","isRegulatedItem":false}]}],"storeInfo":[{"key":"isHybridStore","value":"true"},{"key":"isMFC","value":"true"},{"key":"isErumsEnabled","value":"true"},{"key":"isPremiumStore","value":"true"},{"key":"is3PLStore","value":"true"}]}'

    java -cp edis-kafka-0.0.2-SNAPSHOT-jar-with-dependencies.jar message.Producer OSMS-EMOM_C02_ORDER AnjanaAccount.txt '{"orderNumber":"20027908","versionNumber":1,"orderStatus":"CREATED","companyId":"1","banner":"Safeway","storeNumber":"1502","orderCreatedDate":"2020-07-27T12:54:58.114Z","sourceInfo":{"source":"ECOMMERCE","enteredBy":"CUSTOMER","deviceType":"WEB"},"orderTotal":{"amount":"107.09","currency":"USD"},"customer":{"customerId":"Qmr-n1L-0FaAnstCAw2nY","clubCardNumber":"rB2MWhv3PEr","isSubscription":false,"name":{"firstName":"Y3PR","lastName":"irM"},"address":[{"addressType":"epgj-qg","addressLine1":"wqqz GLuLB 4I2j cV","city":"tMpZJg6gSq","state":"Hpz","zipCode":"csQIO","country":"USA"}],"contact":[{"number":"5zvece3V9h","type":"MOBILE"}],"email":[{"id":"jGxJ0E4.xk6sKQ8@bQTSN.vix","type":"PERSONAL"}],"preference":{"optIn":[{"type":"TEXT","id":"8612345455","isOptin":true}]}},"paymentDetails":[{"paymentType":"CREDITCARD","paymentSubType":"VISA","tokenNumber":"KPHL1Xh1ydMgpzI9","cardExpiryMonth":"qPbj","cardExpiryYear":"23","zipcode":"s9P0y","reqAuthorizationAmount":"107.09","cardHolderName":"j7yxG7D M b","address":{"zipCode":"HBbOs"},"paymentStatus":{"status":"NOTAUTHORIZED","authorizationCode":"x7VLYvdF","authorizationDate":"2020-07-27T12:54:58.147Z"}}],"subOrders":[{"subOrderNumber":1,"fulfillmentType":"DUG","customerService":{"contact":[{"number":"6987079608","type":"MOBILE","subType":"DUG_VIRTUAL_PHONE"},{"number":"7987875877","type":"MOBILE","subType":"OPERATION_PHONE_MOBILE1"},{"number":"6987097659","type":"PHONE","subType":"OPERATION_PHONE_MOBILE2"},{"number":"6876329847","type":"PHONE","subType":"OPERATION_PHONE_MOBILE3"},{"number":"6873698739","type":"PHONE","subType":"OPERATION_PHONE_MOBILE4"},{"number":"6873269368","type":"MOBILE","subType":"OPERATION_PHONE_MOBILE5"},{"number":"7327498732","type":"PHONE","subType":"OPERATION_PHONE_MOBILE6"},{"number":"6876987769","type":"MOBILE","subType":"CUST_SERV_PHONE"},{"number":"6869869868","type":"MOBILE","subType":"STORE_PHONE"}]},"deliveryInfo":{"slotInfo":{"slotPlan":"STANDARD","slotType":"ONEHR","slotId":"65ad7565-da54-438a-ab7f-975a38bba712","timeZone":"America/Los_Angeles","startTime":"2020-07-27T17:00:00.000Z","endTime":"2020-07-27T18:00:00.000Z","editingCutoffDate":"2020-07-27T14:00:00.000Z","lastPickupTime":"2020-07-28T03:00:00.000Z"},"instructions":"","pickupInfo":{"locationType":"STORE","locationId":"1502"},"stageByDateTime":"2020-07-27T18:00:00.000Z"},"charges":[{"id":"0000000029103","name":"BagFee","category":"ServiceFee","chargeAmount":{"amount":"0.1","currency":"USD"}}],"promoCodes":[],"orderLines":[{"itemId":"960304350","itemDescription":"Value Corner Eggs Large Family Pack - 60 Count","orderedQuantity":2,"unitOfMeasure":"CT","unitPrice":{"amount":"10.29","currency":"USD"},"substitutionCode":"2","substitutionValue":"Same Brand Diff Size","isRegulatedItem":false},{"itemId":"148020081","itemDescription":"Marie Callenders Entree Pot Pie Chicken - 4-10 Oz","orderedQuantity":2,"unitOfMeasure":"OZ","unitPrice":{"amount":"6.99","currency":"USD"},"substitutionCode":"2","substitutionValue":"Same Brand Diff Size","isRegulatedItem":false},{"itemId":"960031028","itemDescription":"Signature Farms Boneless Skinless Chicken Breasts Value Pack - 3 Lbs.","orderedQuantity":1,"unitOfMeasure":"LB","unitPrice":{"amount":"12.57","currency":"USD"},"substitutionCode":"2","substitutionValue":"Same Brand Diff Size","isRegulatedItem":false},{"itemId":"960105958","itemDescription":"Tide Plus Laundry Detergent Liquid HE Turbo Clean Downy April Fresh - 92 Fl. Oz.","orderedQuantity":4,"unitOfMeasure":"FZ","unitPrice":{"amount":"14.99","currency":"USD"},"substitutionCode":"2","substitutionValue":"Same Brand Diff Size","isRegulatedItem":false}]}],"storeInfo":[{"key":"isHybridStore","value":"true"},{"key":"isMFC","value":"false"},{"key":"isErumsEnabled","value":"true"},{"key":"isPremiumStore","value":"true"},{"key":"is3PLStore","value":"true"},{"key":"isDUGArrivalEnabled","value":"true"}]}'

    java -cp edis-kafka-0.0.2-SNAPSHOT-jar-with-dependencies.jar message.Producer OSMS-EMOM_C02_ORDER AnjanaAccount.txt '{"orderNumber":"37310876","versionNumber":1,"orderStatus":"COMPLETED","companyId":"1","banner":"Safeway","storeNumber":"1490","orderCreatedDate":"2020-07-15T19:33:21.043Z","sourceInfo":{"source":"ECHO","enteredBy":"CUSTOMER","deviceType":"WEB","affiliate":{"affiliateName":"IBOTTA","affiliateOrderRef":"A123544334-123"}},"tender":[{"tenderType":"REFUND","tenderSubType":"credit_card_refund","chargeAmount":{"amount":3.95,"currency":"USD"}},{"tenderType":"CANCELLATION","tenderSubType":"credit_card_refund","chargeAmount":{"amount":3.95,"currency":"USD"}}],"orderTotal":{"amount":79.87,"currency":"USD"},"customer":{"customerId":"300-368-1000020461","clubCardNumber":"41032675319","isSubscription":false,"name":{"firstName":"THEODORE","lastName":"CHIAO"},"address":[{"addressType":"SHIP-TO","addressLine1":"75 Folsom St Apt 901","addressLine2":" ","city":"San Francisco","state":"CA","zipCode":"94105","country":"USA"}],"contact":[{"number":"4155336055","type":"MOBILE"}],"email":[{"id":"tedhchiao@gmail.com","type":"PERSONAL"}],"preference":{"optIn":[{"type":"TEXT","id":"4155336055","isOptin":true}]}},"paymentDetails":[{"paymentType":"CREDITCARD","paymentSubType":"American Express","tokenNumber":"933418729074015","cardExpiryMonth":"07","cardExpiryYear":"20","zipcode":"94105","reqAuthorizationAmount":"79.87","cardHolderName":"Theodore Chiao","address":{"zipCode":"94105"},"paymentStatus":{"status":"AUTHORIZED","authorizationCode":"150569","authorizationDate":"2020-07-16T06:33:21.079Z"}},{"paymentType":"CREDITONACCOUNT","paymentSubType":"COA","reqAuthorizationAmount":"10","paymentStatus":{"status":"AUTHORIZED","authorizationDate":"2020-07-07T18:18:04.476Z"}},{"paymentType":"EBT","paymentSubType":"EBT","reqAuthorizationAmount":"20","paymentStatus":{"status":"SUSPENDED"}}],"subOrders":[{"subOrderNumber":1,"fulfillmentType":"DELIVERY","customerService":{"contact":[{"number":"8775054040","type":"PHONE","subType":"CUST_SERV_PHONE"}]},"deliveryInfo":{"deliverySubType":"RESIDENTIAL","slotInfo":{"slotPlan":"STANDARD","slotType":"FOURHR","slotId":"7e4232d0-dc62-4156-8844-3040468f788f","timeZone":"America/Los_Angeles","startTime":"2020-07-16T15:01:00.000Z","endTime":"2020-07-16T19:00:00.000Z","editingCutoffDate":"2020-07-16T08:00:00.000Z"},"deliveryServiceType":"ATTENDED","instructions":"","stageByDateTime":"2020-07-16T19:00:00.000Z"},"charges":[{"id":"0000000029103","name":"BagFee","category":"ServiceFee","chargeAmount":{"amount":0.1,"currency":"USD"}},{"id":"0000000022155","name":"DeliveryFee","category":"DeliveryFee","chargeAmount":{"amount":3.95,"currency":"USD"}}],"promoCodes":[],"orderLines":[{"itemId":"05050000022","itemDescription":"FJ LIVERWURST","orderedQuantity":2,"unitOfMeasure":"UNIT","unitPrice":{"amount":4.99,"currency":"USD"},"suppliedQuantity":2,"suppliedQuantityType":"UNIT","suppliedUnitPrice":{"amount":4.99,"currency":"USD"},"itemTotalTax":"0.0","discountsApplied":"-0.99","isRegulatedItem":false}],"refundedOrderLines":[{"itemDescription":"FJ LIVERWURST","refundedQuantity":2,"unitOfMeasure":"","unitPrice":{"amount":4.99,"currency":"USD"}}],"subOrderStatus":"COMPLETED"}],"storeInfo":[{"key":"isHybridStore","value":"true"},{"key":"isMFC","value":"false"},{"key":"isErumsEnabled","value":"true"},{"key":"isPremiumStore","value":"true"},{"key":"is3PLStore","value":"true"}]}'

    java -cp edis-kafka-0.0.2-SNAPSHOT-jar-with-dependencies.jar message.Producer OSMS-EMOM_C02_ORDER AnjanaAccount.txt '{"orderNumber":"20030881","versionNumber":1,"companyId":"1","banner":"Safeway","storeNumber":"1502","orderStatus":"COMPLETED","orderCreatedDate":"2020-08-13T18:04:33.320Z","sourceInfo":{"source":"ECHO","enteredBy":"CUSTOMER","deviceType":"MOBILE","affiliate":{"affiliateName":"IBOTTA","affiliateOrderRef":"fakesrctok-1b3b12345f7f1056"}},"orderTotal":{"amount":24.12,"currency":"USD"},"customer":{"customerId":"557-220-1596564497706","clubCardNumber":"49372831113","isSubscription":true,"name":{"firstName":"raja","lastName":"ram"},"address":[{"addressType":"SHIP-TO","addressLine1":"1701 Santa Rita Rd","city":"Pleasanton","state":"CA","zipCode":"94566","country":"USA"}],"contact":[{"number":"4085055665","type":"MOBILE"}],"email":[{"id":"4aug@example.com","type":"PERSONAL"}],"preference":{"optIn":[{"type":"TEXT","id":"4085055665","isOptin":true}]}},"paymentDetails":[{"paymentType":"CREDITCARD","paymentSubType":"Visa","tokenNumber":"9495846215171111","cardExpiryMonth":"08","cardExpiryYear":"29","zipcode":"94566","reqAuthorizationAmount":"24.12","cardHolderName":"ss","address":{"zipCode":"94566"},"paymentStatus":{"status":"Approved","authorizationCode":"ET127395","authorizationDate":"2020-08-14T16:33:22.000Z"}}],"subOrders":[{"subOrderNumber":1,"subOrderStatus":"COMPLETED","fulfillmentType":"DUG","deliveryInfo":{"slotInfo":{"slotType":"ONEHR","slotId":"1cf9124f-0179-4e93-bb2e-dbea1d7ae8c6","timeZone":"America/Los_Angeles","startTime":"2020-08-19T15:00:00.000Z","endTime":"2020-08-19T16:00:00.000Z","editingCutoffDate":"2020-08-19T12:00:00.000Z","slotPlan":"STANDARD","lastPickupTime":"2020-08-20T03:00:00.000Z"},"instructions":"","pickupInfo":{"locationType":"STORE","locationId":"1502"},"stageByDateTime":"2020-08-19T16:00:00.000Z"},"charges":[{"id":"00000029103","name":"BAG FEE           ","chargeAmount":{"amount":0.3,"currency":"USD"}}],"promoCodes":[],"orderLines":[{"itemId":"329","itemDescription":"DEBI LILLY FRAGRANT ROSE BOUQUET","orderedQuantity":1,"unitOfMeasure":"UNIT","substitutionValue":"Same Brand, Different Size","isRegulatedItem":false,"suppliedQuantity":1,"suppliedQuantityType":"UNIT","suppliedUnitPrice":{"amount":5.99,"currency":"USD"},"itemTotalTax":0,"discountsApplied":0},{"itemId":"02113007028","itemDescription":"LUCERNE MILK REDUCED FAT 2%","orderedQuantity":5,"unitOfMeasure":"UNIT","substitutionValue":"Same Brand, Different Size","isRegulatedItem":false,"suppliedQuantity":5,"suppliedQuantityType":"UNIT","suppliedUnitPrice":{"amount":3.49,"currency":"USD"},"itemTotalTax":0,"discountsApplied":0}],"refundedOrderLines":[{"itemDescription":"2/10 MILK #290","unitPrice":{"amount":3.49,"currency":"USD"},"refundedQuantity":5}],"messageAction":"COMPLETED","customerService":{"contact":[{"number":"6987079608","type":"MOBILE","subType":"DUG_VIRTUAL_PHONE"},{"number":"7987875877","type":"MOBILE","subType":"OPERATION_PHONE_MOBILE1"},{"number":"6987097659","type":"PHONE","subType":"OPERATION_PHONE_MOBILE2"},{"number":"6876329847","type":"PHONE","subType":"OPERATION_PHONE_MOBILE3"},{"number":"6873698739","type":"PHONE","subType":"OPERATION_PHONE_MOBILE4"},{"number":"6873269368","type":"MOBILE","subType":"OPERATION_PHONE_MOBILE5"},{"number":"7327498732","type":"PHONE","subType":"OPERATION_PHONE_MOBILE6"},{"number":"6876987769","type":"MOBILE","subType":"CUST_SERV_PHONE"},{"number":"6869869868","type":"MOBILE","subType":"STORE_PHONE"}]}}],"tender":[{"tenderType":"REFUND","tenderSubType":"credit_card_refund","chargeAmount":{"amount":17.45,"currency":"USD"}}],"storeInfo":[{"key":"isHybridStore","value":"true"},{"key":"isMFC","value":"false"},{"key":"isErumsEnabled","value":"true"},{"key":"isPremiumStore","value":"true"},{"key":"is3PLStore","value":"true"}]}'

    java -cp edis-kafka-0.0.2-SNAPSHOT-jar-with-dependencies.jar message.Producer OSMS-EMOM_C02_ORDER AnjanaAccount.txt '{"orderNumber":"18182998","versionNumber":2,"orderStatus":"PAYMENT_REQUESTED","orderStatusReasonCode":"CUS_RESCEDULE_CANCEL","messageAction":"UPDATE","messageActionReason":"","companyId":"1","banner":"JewelOsco","isActive":true,"storeNumber":"0607","orderCreatedDate":"2020-08-13T07:51:11.179Z","fulfillmentSystem":"MANHATTAN","sourceInfo":{"source":"ECOMMERCE","enteredBy":"CUSTOMER","deviceType":"MOBILE","affiliate":{"affiliateName":"IBOTTA","affiliateOrderRef":"A123544334-123"}},"orderTotal":{"amount":"263.56","currency":"USD","totalCardSavings":15.51,"cardSavings":[{"savingsCategoryId":123,"savingsCategoryName":"String","savingsAmount":12.23}]},"customer":{"customerId":"556-020-1586122641346","clubCardNumber":"49130429968","isSubscription":false,"memberId":"1231321323","name":{"firstName":"JASON","lastName":"GRESS"},"address":[{"addressType":"SHIPTO","addressLine1":"14448 Donna Ln","addressLine2":" ","city":"Saratoga","state":"CA","zipCode":"95070","country":"USA"}],"contact":[{"number":"4088577000","type":"MOBILE"}],"email":[{"id":"gressholdings@gmail.com","type":"PERSONAL"}],"preference":{"termsCheckedVersionId":"0","optIn":[{"id":"4088577000","type":"TEXT","isOptin":true}]}},"paymentDetails":[{"paymentType":"CREDITCARD","paymentSubType":"AMEX","tokenNumber":"846787175413009","cardExpiryMonth":"10","cardExpiryYear":"24","zipcode":"95070","reqAuthorizationAmount":"263.56","cardHolderName":"Jason Gress","address":{"zipCode":"95070"},"paymentStatus":{"status":"NOTAUTHORIZED","authorizationCode":"201946","authorizationDate":"2020-08-13T07:51:11.233Z"}}],"subOrders":[{"subOrderNumber":1,"subOrderStatusReasonCode":"RESCHEDULE_SLOT","messageAction":"UPDATE","messageActionReason":"RESCHEDULE_SLOT","fulfillmentType":"DELIVERY","customerService":{"contact":[{"number":"8775054040","type":"PHONE","subType":"CUST_SERV_PHONE"}]},"deliveryInfo":{"deliverySubType":"RESIDENTIAL","slotInfo":{"slotPlan":"STANDARD","slotType":"FOURHR","slotId":"95e9bd9c-bedd-41ac-b0ad-04bebd4d7eb9","timeZone":"America/Los_Angeles","startTime":"2020-08-13T15:01:00.000Z","endTime":"2020-08-13T19:00:00.000Z","shiftNumber":"7","lastPickupTime":"2020-03-25T20:00:00.000Z","editingCutoffDate":"2020-08-13T08:00:00.000Z"},"deliveryServiceType":"ATTENDED","instructions":"","stageByDateTime":"2020-08-13T14:21:00.000Z","pickupInfo":{"locationType":"STORE","locationId":"1211","shortOrderNumber":4}},"charges":[{"id":"0000000029103","name":"BagFee","category":"ServiceFee","chargeAmount":{"amount":"0.1","currency":"USD"}},{"id":"0000000022155","name":"DeliveryFee","category":"DeliveryFee","chargeAmount":{"amount":"3.95","currency":"USD"}}],"promoCodes":[{"code":"SAVE20","description":"$20 Off Orders Over $75","pluCode":"00001234"}],"routeInfo":{"vanNumber":"DDS","stopNumber":"377"},"tote":{"toteEstimate":{"chilled":6,"frozen":2,"ambient":7},"toteDetails":[{"toteId":"","item":[]},{"toteId":"99800400215899","item":[{"itemId":"960027187","fulfilledUpc":[{"upcId":"003320009471","upcQuantity":1,"scannedUpc":"033200094715","pickedBy":"SYSTEM","pickedDate":"2020-08-13T09:38:01.782Z","pickType":"REGULAR"}]}]}],"totalPickedToteCount":4,"totalNumberOfBagsUsed":5},"orderLines":[{"itemId":"196011495","itemDescription":"San Luis Sourdough Bread Round - 24 Oz","orderedQuantity":1,"shortedQuantity":0,"fulfilledQuantity":1,"unitOfMeasure":"OZ","unitPrice":{"amount":"4.99","currency":"USD"},"substitutionCode":"2","substitutionValue":"Same Brand Diff Size","isRegulatedItem":false,"comments":"","fulfilledUpc":[{"upcId":"001853724157","entryId":100,"upcQuantity":1,"pickedBy":"SYSTEM","pickedDate":"2020-08-13T09:38:01.782Z","pickType":"REGULAR","scanPrice":2.33,"isSubstituted":false,"itemPrice":{"itemCode":"UPC","entryId":100,"department":30,"unitPrice":20.5,"extendedPrice":5.5,"quantityType":"LB","quantityValue":4.45,"discountAllowed":true,"linkPluNumber":"promo PLU","startDate":"2020-08-13T09:38:01.782Z","endDate":"2020-08-14T09:38:01.782Z","itemPluNumber":"embedded item PLU","pointsApplyItem":true,"wic":false,"substituted":false,"netPromotionAmount":205.49,"savings":[{"offerId":"463272","externalOfferId":"463274","category":1,"source":"CPE","linkpluNumber":"promo PLU","programCode":"SC","startDate":"2020-08-13T07:00:00.000+0000","endDate":"2020-08-14T07:00:00.000+0000","discountAmount":14.94,"discountType":"Free","description":"Default Description","discountMessage":"discount","discountLevel":"Item Level","promotionPrice":2.59,"netPromotionAmount":8.43,"points":[{"programName":"String","earn":1,"burn":1}]}]}},{"upcId":"001853724157","entryId":200,"upcQuantity":1,"pickedBy":"SYSTEM","pickedDate":"2020-08-13T09:38:01.782Z","pickType":"REGULAR","scanWeight":3.98,"isSubstituted":true,"itemPrice":{"itemCode":"UPC","entryId":100,"department":30,"unitPrice":20.5,"extendedPrice":5.5,"quantityType":"LB","quantityValue":4.45,"discountAllowed":true,"linkPluNumber":"promo PLU","startDate":"2020-08-13T09:38:01.782Z","endDate":"2020-08-14T09:38:01.782Z","itemPluNumber":"embedded item PLU","pointsApplyItem":true,"wic":false,"substituted":false,"netPromotionAmount":205.49,"savings":[{"offerId":"463272","externalOfferId":"463274","category":1,"source":"CPE","linkpluNumber":"promo PLU","programCode":"SC","startDate":"2020-08-13T07:00:00.000+0000","endDate":"2020-08-14T07:00:00.000+0000","discountAmount":14.94,"discountType":"Free","description":"Default Description","discountMessage":"discount","discountLevel":"Item Level","promotionPrice":2.59,"netPromotionAmount":8.43,"points":[{"programName":"String","earn":1,"burn":1}]}]}}],"itemPrice":{"itemCode":"UPC","entryId":100,"department":30,"unitPrice":20.5,"extendedPrice":5.5,"quantityType":"LB","quantityValue":4.45,"discountAllowed":true,"linkPluNumber":"promo PLU","startDate":"2020-08-13T09:38:01.782Z","endDate":"2020-08-14T09:38:01.782Z","itemPluNumber":"embedded item PLU","pointsApplyItem":true,"wic":false,"substituted":false,"netPromotionAmount":205.49,"savings":[{"offerId":"463272","externalOfferId":"463274","category":1,"source":"CPE","linkpluNumber":"promo PLU","programCode":"SC","startDate":"2020-08-13T07:00:00.000+0000","endDate":"2020-08-14T07:00:00.000+0000","discountAmount":14.94,"discountType":"Free","description":"Default Description","discountMessage":"discount","discountLevel":"Item Level","promotionPrice":2.59,"netPromotionAmount":8.43,"points":[{"programName":"String","earn":1,"burn":1}]}]}}]}],"storeInfo":[{"key":"isHybridStore","value":"true"},{"key":"isMFC","value":"false"},{"key":"isErumsEnabled","value":"true"},{"key":"isPremiumStore","value":"true"},{"key":"is3PLStore","value":"true"},{"key":"isDUGArrivalEnabled","value":"false"},{"key":"storeTimeZone","value":"PST"},{"key":"terminalNumber","value":"99"},{"key":"isWYSIWYGEnabled","value":"true"}],"orderInfo":{"stageByDateTime":"2020-08-13T14:21:00.000Z","data":[{"key":"key","value":"value"}]},"audit":{"createDate":"2020-08-13T12:27:32.039Z","modifiedDate":"2020-08-13T12:27:32.039Z","createdBy":"OSCO-SERVICES"}}'
        
## 3. Consume Message
     java -cp edis-kafka-0.0.2-SNAPSHOT-jar-with-dependencies.jar message.Consumer {TOPIC_NAME} latest {DEST_FILE_NAME}.text
     
      java -cp edis-kafka-0.0.2-SNAPSHOT-jar-with-dependencies.jar message.Consumer ESED_C01_GroceryOrder latest GroceryOrder.text

# QA
## 1. ssh qgv012efb
    
    su - esq03ed
    password: #Today@321!

    cd /appl/esed/kafka

## 2. Publish Message 
    java -cp edis-kafka-0.0.2-SNAPSHOT-jar-with-dependencies.jar message.Producer {TOPIC_NAME} per.txt 'MSG'

    java -cp edis-kafka-0.0.2-SNAPSHOT-jar-with-dependencies.jar message.Producer OSMS-EMOM_C02_ORDER per.txt '{"orderNumber":"10027908","versionNumber":1,"orderStatus":"CREATED","companyId":"1","banner":"Safeway","storeNumber":"1502","orderCreatedDate":"2020-07-27T12:54:58.114Z","sourceInfo":{"source":"ECOMMERCE","enteredBy":"CUSTOMER","deviceType":"WEB"},"orderTotal":{"amount":"107.09","currency":"USD"},"customer":{"customerId":"Qmr-n1L-0FaAnstCAw2nY","clubCardNumber":"rB2MWhv3PEr","isSubscription":false,"name":{"firstName":"Y3PR","lastName":"irM"},"address":[{"addressType":"epgj-qg","addressLine1":"wqqz GLuLB 4I2j cV","city":"tMpZJg6gSq","state":"Hpz","zipCode":"csQIO","country":"USA"}],"contact":[{"number":"5zvece3V9h","type":"MOBILE"}],"email":[{"id":"jGxJ0E4.xk6sKQ8@bQTSN.vix","type":"PERSONAL"}],"preference":{"optIn":[{"type":"TEXT","id":"8612345455","isOptin":true}]}},"paymentDetails":[{"paymentType":"CREDITCARD","paymentSubType":"VISA","tokenNumber":"KPHL1Xh1ydMgpzI9","cardExpiryMonth":"qPbj","cardExpiryYear":"23","zipcode":"s9P0y","reqAuthorizationAmount":"107.09","cardHolderName":"j7yxG7D M b","address":{"zipCode":"HBbOs"},"paymentStatus":{"status":"NOTAUTHORIZED","authorizationCode":"x7VLYvdF","authorizationDate":"2020-07-27T12:54:58.147Z"}}],"subOrders":[{"subOrderNumber":1,"fulfillmentType":"DUG","customerService":{"contact":[{"number":"6987079608","type":"MOBILE","subType":"DUG_VIRTUAL_PHONE"},{"number":"7987875877","type":"MOBILE","subType":"OPERATION_PHONE_MOBILE1"},{"number":"6987097659","type":"PHONE","subType":"OPERATION_PHONE_MOBILE2"},{"number":"6876329847","type":"PHONE","subType":"OPERATION_PHONE_MOBILE3"},{"number":"6873698739","type":"PHONE","subType":"OPERATION_PHONE_MOBILE4"},{"number":"6873269368","type":"MOBILE","subType":"OPERATION_PHONE_MOBILE5"},{"number":"7327498732","type":"PHONE","subType":"OPERATION_PHONE_MOBILE6"},{"number":"6876987769","type":"MOBILE","subType":"CUST_SERV_PHONE"},{"number":"6869869868","type":"MOBILE","subType":"STORE_PHONE"}]},"deliveryInfo":{"slotInfo":{"slotPlan":"STANDARD","slotType":"ONEHR","slotId":"65ad7565-da54-438a-ab7f-975a38bba712","timeZone":"America/Los_Angeles","startTime":"2020-07-27T17:00:00.000Z","endTime":"2020-07-27T18:00:00.000Z","editingCutoffDate":"2020-07-27T14:00:00.000Z","lastPickupTime":"2020-07-28T03:00:00.000Z"},"instructions":"","pickupInfo":{"locationType":"STORE","locationId":"1502"},"stageByDateTime":"2020-07-27T18:00:00.000Z"},"charges":[{"id":"0000000029103","name":"BagFee","category":"ServiceFee","chargeAmount":{"amount":"0.1","currency":"USD"}}],"promoCodes":[],"orderLines":[{"itemId":"960304350","itemDescription":"Value Corner Eggs Large Family Pack - 60 Count","orderedQuantity":2,"unitOfMeasure":"CT","unitPrice":{"amount":"10.29","currency":"USD"},"substitutionCode":"2","substitutionValue":"Same Brand Diff Size","isRegulatedItem":false},{"itemId":"148020081","itemDescription":"Marie Callenders Entree Pot Pie Chicken - 4-10 Oz","orderedQuantity":2,"unitOfMeasure":"OZ","unitPrice":{"amount":"6.99","currency":"USD"},"substitutionCode":"2","substitutionValue":"Same Brand Diff Size","isRegulatedItem":false},{"itemId":"960031028","itemDescription":"Signature Farms Boneless Skinless Chicken Breasts Value Pack - 3 Lbs.","orderedQuantity":1,"unitOfMeasure":"LB","unitPrice":{"amount":"12.57","currency":"USD"},"substitutionCode":"2","substitutionValue":"Same Brand Diff Size","isRegulatedItem":false},{"itemId":"960105958","itemDescription":"Tide Plus Laundry Detergent Liquid HE Turbo Clean Downy April Fresh - 92 Fl. Oz.","orderedQuantity":4,"unitOfMeasure":"FZ","unitPrice":{"amount":"14.99","currency":"USD"},"substitutionCode":"2","substitutionValue":"Same Brand Diff Size","isRegulatedItem":false}]}],"storeInfo":[{"key":"isHybridStore","value":"true"},{"key":"isMFC","value":"false"},{"key":"isErumsEnabled","value":"true"},{"key":"isPremiumStore","value":"true"},{"key":"is3PLStore","value":"true"},{"key":"isDUGArrivalEnabled","value":"true"}]}'

    java -cp edis-kafka-0.0.2-SNAPSHOT-jar-with-dependencies.jar message.Producer OSMS-EMOM_C02_ORDER per.txt '{"orderNumber":"37310876","versionNumber":1,"orderStatus":"COMPLETED","companyId":"1","banner":"Safeway","storeNumber":"1490","orderCreatedDate":"2020-07-15T19:33:21.043Z","sourceInfo":{"source":"ECHO","enteredBy":"CUSTOMER","deviceType":"WEB","affiliate":{"affiliateName":"IBOTTA","affiliateOrderRef":"A123544334-123"}},"tender":[{"tenderType":"REFUND","tenderSubType":"credit_card_refund","chargeAmount":{"amount":3.95,"currency":"USD"}},{"tenderType":"CANCELLATION","tenderSubType":"credit_card_refund","chargeAmount":{"amount":3.95,"currency":"USD"}}],"orderTotal":{"amount":79.87,"currency":"USD"},"customer":{"customerId":"300-368-1000020461","clubCardNumber":"41032675319","isSubscription":false,"name":{"firstName":"THEODORE","lastName":"CHIAO"},"address":[{"addressType":"SHIP-TO","addressLine1":"75 Folsom St Apt 901","addressLine2":" ","city":"San Francisco","state":"CA","zipCode":"94105","country":"USA"}],"contact":[{"number":"4155336055","type":"MOBILE"}],"email":[{"id":"tedhchiao@gmail.com","type":"PERSONAL"}],"preference":{"optIn":[{"type":"TEXT","id":"4155336055","isOptin":true}]}},"paymentDetails":[{"paymentType":"CREDITCARD","paymentSubType":"American Express","tokenNumber":"933418729074015","cardExpiryMonth":"07","cardExpiryYear":"20","zipcode":"94105","reqAuthorizationAmount":"79.87","cardHolderName":"Theodore Chiao","address":{"zipCode":"94105"},"paymentStatus":{"status":"AUTHORIZED","authorizationCode":"150569","authorizationDate":"2020-07-16T06:33:21.079Z"}},{"paymentType":"CREDITONACCOUNT","paymentSubType":"COA","reqAuthorizationAmount":"10","paymentStatus":{"status":"AUTHORIZED","authorizationDate":"2020-07-07T18:18:04.476Z"}},{"paymentType":"EBT","paymentSubType":"EBT","reqAuthorizationAmount":"20","paymentStatus":{"status":"SUSPENDED"}}],"subOrders":[{"subOrderNumber":1,"fulfillmentType":"DELIVERY","customerService":{"contact":[{"number":"8775054040","type":"PHONE","subType":"CUST_SERV_PHONE"}]},"deliveryInfo":{"deliverySubType":"RESIDENTIAL","slotInfo":{"slotPlan":"STANDARD","slotType":"FOURHR","slotId":"7e4232d0-dc62-4156-8844-3040468f788f","timeZone":"America/Los_Angeles","startTime":"2020-07-16T15:01:00.000Z","endTime":"2020-07-16T19:00:00.000Z","editingCutoffDate":"2020-07-16T08:00:00.000Z"},"deliveryServiceType":"ATTENDED","instructions":"","stageByDateTime":"2020-07-16T19:00:00.000Z"},"charges":[{"id":"0000000029103","name":"BagFee","category":"ServiceFee","chargeAmount":{"amount":0.1,"currency":"USD"}},{"id":"0000000022155","name":"DeliveryFee","category":"DeliveryFee","chargeAmount":{"amount":3.95,"currency":"USD"}}],"promoCodes":[],"orderLines":[{"itemId":"05050000022","itemDescription":"FJ LIVERWURST","orderedQuantity":2,"unitOfMeasure":"UNIT","unitPrice":{"amount":4.99,"currency":"USD"},"suppliedQuantity":2,"suppliedQuantityType":"UNIT","suppliedUnitPrice":{"amount":4.99,"currency":"USD"},"itemTotalTax":"0.0","discountsApplied":"-0.99","isRegulatedItem":false}],"refundedOrderLines":[{"itemDescription":"FJ LIVERWURST","refundedQuantity":2,"unitOfMeasure":"","unitPrice":{"amount":4.99,"currency":"USD"}}],"subOrderStatus":"COMPLETED"}],"storeInfo":[{"key":"isHybridStore","value":"true"},{"key":"isMFC","value":"false"},{"key":"isErumsEnabled","value":"true"},{"key":"isPremiumStore","value":"true"},{"key":"is3PLStore","value":"true"}]}'

    java -cp edis-kafka-0.0.2-SNAPSHOT-jar-with-dependencies.jar message.Producer OSMS-EMOM_C02_ORDER per.txt '{"orderNumber":"3105","versionNumber":1,"orderStatus":"CREATED","companyId":"1","banner":"Safeway","storeNumber":"3116","messageAction":"CREATE","orderCreatedDate":"2020-10-15T08:16:19.936Z","sourceInfo":{"source":"ECOMMERCE","enteredBy":"CUSTOMER","deviceType":"WEB"},"orderTotal":{"amount":45.92,"currency":"USD","totalCardSavings":9,"cardSavings":[{"savingsCategoryId":89,"savingsCategoryName":"Rewards Savings","savingsAmount":9}],"txnLevelSavings":[{"offerId":"617523","externalOfferId":"617523","points":[{"programName":"Dollar Point Accumulation 20 September","earn":6,"burn":0}]}]},"customer":{"customerId":"456-091-1594837017223","clubCardNumber":"i447dvemQ42","isSubscription":false,"name":{"firstName":"vuCz","lastName":"gcL"},"address":[{"addressType":"epgj-qg","addressLine1":"lv0o j1ubKyn 1F5K","city":"Zx2wx w98 Wa0H7Qb4wl","state":"Hpz","zipCode":"PItCY","country":"USA"}],"contact":[{"number":"c1THGWDS8j","type":"MOBILE"}],"email":[{"id":"seku@8Mk.ojP","type":"PERSONAL"}],"preference":{"optIn":[{"type":"TEXT","id":"8956237410","isOptin":true}]},"memberId":"745005853446"},"paymentDetails":[{"paymentType":"CREDITCARD","paymentSubType":"VISA","tokenNumber":"KPHL1Xh1ydMgpzI9","cardExpiryMonth":"B93V","cardExpiryYear":"25","zipcode":"z8mSd","reqAuthorizationAmount":"45.92","cardHolderName":"xoC","address":{"zipCode":"PItCY"},"paymentStatus":{"status":"NOTAUTHORIZED","authorizationCode":"WvfomOPv","authorizationDate":"2020-10-15"}}],"subOrders":[{"subOrderNumber":1,"fulfillmentType":"DELIVERY","customerService":{"contact":[{"number":"7843793105","type":"MOBILE","subType":"CUST_SERV_PHONE"}]},"deliveryInfo":{"deliverySubType":"RESIDENTIAL","slotInfo":{"slotPlan":"STANDARD","slotType":"ONEHR","slotId":"bcf146a2-545b-409c-8cb5-4d1834c696c6","timeZone":"America/Los_Angeles","startTime":"2020-10-15T15:02:00.000Z","endTime":"2020-10-15T16:00:00.000Z","editingCutoffDate":"2020-10-15T12:00:00.000Z"},"deliveryServiceType":"ATTENDED","instructions":"","stageByDateTime":"2020-10-15T16:00:00.000Z"},"charges":[{"id":"0000000029103","name":"BagFee","category":"ServiceFee","chargeAmount":{"amount":0.1,"currency":"USD"}},{"id":"0000000022140","name":"DeliveryFee","category":"DeliveryFee","chargeAmount":{"amount":9.95,"currency":"USD"}}],"promoCodes":[],"orderLines":[{"itemId":"960160401","itemDescription":"Peets Coffee Coffee Ground Medium Roast Big Bang - 12 Oz","orderedQuantity":3,"unitOfMeasure":"OZ","unitPrice":{"amount":11.99,"currency":"USD"},"substitutionCode":"2","substitutionValue":"Same Brand Diff Size","isRegulatedItem":false,"department":{"id":"301","name":"Beverages"},"aisle":{"id":"1_5_3_1","name":"Coffee"},"shelf":{"id":"1_5_3_1","name":"Coffee - Ground"},"itemPrice":{"itemCode":"960160401","entryId":1,"department":301,"unitPrice":11.99,"extendedPrice":35.97,"quantityType":"EA","quantityValue":3,"discountAllowed":false,"itemPluNumber":"0","pointsApplyItem":false,"wic":false,"netPromotionAmount":26.97,"savings":[{"offerId":"617492","externalOfferId":"617492","category":89,"source":"CPE","netPromotionAmount":32.97,"programCode":"SC","startDate":"2020-09-21T00:00:00.000Z","endDate":"2021-07-24T00:00:00.000Z","discountAmount":3,"discountType":"Fixed Amount Off","description":"EPE - Grocery Rewards - Dollar Off offer when purchase any item with 1 qty","discountMessage":"","discountLevel":"Item Level","calculateUsage":true},{"offerId":"617514","externalOfferId":"617514","category":89,"source":"CPE","netPromotionAmount":29.97,"programCode":"SC","startDate":"2020-09-21T00:00:00.000Z","endDate":"2021-07-24T00:00:00.000Z","discountAmount":3,"discountType":"Fixed Amount Off","description":"EPE - Grocery Rewards - Dollar Off offer when purchase any item with 1 qty","discountMessage":"","discountLevel":"Item Level","calculateUsage":true,"points":[{"programName":"Dollar Point Accumulation 20 September","earn":6,"burn":0}]},{"offerId":"617516","externalOfferId":"617516","category":89,"source":"CPE","netPromotionAmount":26.97,"programCode":"SC","startDate":"2020-09-21T00:00:00.000Z","endDate":"2021-07-24T00:00:00.000Z","discountAmount":3,"discountType":"Fixed Amount Off","description":"EPE - Grocery Rewards - Dollar Off offer when purchase any item with 1 qty","discountMessage":"","discountLevel":"Item Level","calculateUsage":true,"points":[{"programName":"Dollar Point Accumulation 20 September","earn":6}]}]}}],"messageAction":"CREATE"}],"storeInfo":[{"key":"isHybridStore","value":"true"},{"key":"isMFC","value":"true"},{"key":"isErumsEnabled","value":"true"},{"key":"isPremiumStore","value":"true"},{"key":"is3PLStore","value":"true"},{"key":"isDUGArrivalEnabled","value":"false"},{"key":"isWYSIWYGEnabled","value":"true"},{"key":"storeTimeZone","value":"America/Los_Angeles"},{"key":"terminalNumber","value":"99"}],"usageLimit":{"offersRemoved":["offer1"],"offersAdded":[]}}'
    
    
## 3. Consume Message
     java -cp edis-kafka-0.0.2-SNAPSHOT-jar-with-dependencies.jar message.Consumer {TOPIC_NAME} latest {DEST_FILE_NAME}.text
     
     java -cp edis-kafka-0.0.2-SNAPSHOT-jar-with-dependencies.jar message.Consumer ESED_C01_GroceryOrder latest GroceryOrder_1_4.text



mqsiapplybaroverride -k ESED_GroceryOrder_eRUMS_IH_Publisher -b ESED_GroceryOrder_eRUMS_IH_Publisher.bar -p ESED_GroceryOrder_eRUMS_IH_Publisher.BASE.override.properties


b2bCharge/reducedDeliveryChargeUPC
b2cCharge/reducedDeliveryChargeUPC