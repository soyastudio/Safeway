$GLOBAL_VARIABLE.VERSION_ID='3.1.4.023'
$GLOBAL_VARIABLE.SYSTEM_ENVIRONMENT_CODE='PROD'

GetCustomerPreferences=construct()
GetCustomerPreferences/DocumentData=construct()
GetCustomerPreferences/DocumentData/Document=construct()
GetCustomerPreferences/DocumentData/Document/@ReleaseId=
GetCustomerPreferences/DocumentData/Document/@VersionId=ASSIGN(VERSION_ID)
GetCustomerPreferences/DocumentData/Document/@SystemEnvironmentCd=ASSIGN(SYSTEM_ENVIRONMENT_CODE)
GetCustomerPreferences/DocumentData/Document/DocumentID=DEFAULT('CUSTOMER_PREFERENCES_MANAGEMENT')
GetCustomerPreferences/DocumentData/Document/AlternateDocumentID=DEFAULT('IAUC_C02.cfms.aggregate-' || CAST(CURRENT_TIMESTAMP AS CHARACTER FORMAT 'YYYYMMddHHmmssSSSSSS'))
GetCustomerPreferences/DocumentData/Document/InboundOutboundInd=DEFAULT('Outbound from Albertsons')
GetCustomerPreferences/DocumentData/Document/DocumentNm=DEFAULT('GetCustomerPreference')
GetCustomerPreferences/DocumentData/Document/CreationDt=ASSIGN(CURRENT_TIMESTAMP)
GetCustomerPreferences/DocumentData/Document/Description=DEFAULT('Retail customer''s generic preferences and the subscriptions')
GetCustomerPreferences/DocumentData/Document/SourceApplicationCd=DEFAULT('CFMS')
GetCustomerPreferences/DocumentData/Document/TargetApplicationCd=DEFAULT('EDIS')
GetCustomerPreferences/DocumentData/Document/Note=
GetCustomerPreferences/DocumentData/Document/GatewayNm=
GetCustomerPreferences/DocumentData/Document/SenderId=
GetCustomerPreferences/DocumentData/Document/ReceiverId=
GetCustomerPreferences/DocumentData/Document/RoutingSystemNm=
GetCustomerPreferences/DocumentData/Document/InternalFileTransferInd=DEFAULT('Y')
GetCustomerPreferences/DocumentData/Document/InterchangeDate=
GetCustomerPreferences/DocumentData/Document/InterchangeTime=
GetCustomerPreferences/DocumentData/Document/ExternalTargetInd=
GetCustomerPreferences/DocumentData/Document/MessageSequenceNbr=
GetCustomerPreferences/DocumentData/Document/ExpectedMessageCnt=
GetCustomerPreferences/DocumentData/Document/DataClassification=construct()
GetCustomerPreferences/DocumentData/Document/DataClassification/DataClassificationLevel=construct()
GetCustomerPreferences/DocumentData/Document/DataClassification/DataClassificationLevel/Code=DEFAULT('Internal')
GetCustomerPreferences/DocumentData/Document/DataClassification/DataClassificationLevel/Description=
GetCustomerPreferences/DocumentData/Document/DataClassification/DataClassificationLevel/ShortDescription=
GetCustomerPreferences/DocumentData/Document/DataClassification/BusinessSensitivityLevel=construct()
GetCustomerPreferences/DocumentData/Document/DataClassification/BusinessSensitivityLevel/Code=DEFAULT('Low')
GetCustomerPreferences/DocumentData/Document/DataClassification/BusinessSensitivityLevel/Description=
GetCustomerPreferences/DocumentData/Document/DataClassification/BusinessSensitivityLevel/ShortDescription=
GetCustomerPreferences/DocumentData/Document/DataClassification/PHIdataInd=DEFAULT('N')
GetCustomerPreferences/DocumentData/Document/DataClassification/PCIdataInd=DEFAULT('N')
GetCustomerPreferences/DocumentData/Document/DataClassification/PIIdataInd=DEFAULT('N')
GetCustomerPreferences/DocumentData/DocumentAction=construct()
GetCustomerPreferences/DocumentData/DocumentAction/ActionTypeCd=DEFAULT('UPDATE')
GetCustomerPreferences/DocumentData/DocumentAction/RecordTypeCd=DEFAULT('CHANGE')

GetCustomerPreferences/CustomerPreferencesData=construct()
GetCustomerPreferences/CustomerPreferencesData/CustomerId=ASSIGN($.aggregateId)
GetCustomerPreferences/CustomerPreferencesData/CustomerAlternateId=
GetCustomerPreferences/CustomerPreferencesData/CustomerAlternateId/@typeCode=
GetCustomerPreferences/CustomerPreferencesData/CustomerAlternateId/@sequenceNbr=
GetCustomerPreferences/CustomerPreferencesData/CustomerAlternateId/AlternateIdTxt=
GetCustomerPreferences/CustomerPreferencesData/CustomerAlternateId/AlternateIdNbr=
GetCustomerPreferences/CustomerPreferencesData/CustomerPreferences=construct().loop(loop_lpv0, $.state.preferences[*], _lpv0)
GetCustomerPreferences/CustomerPreferencesData/CustomerPreferences/PreferenceClassNm=LOOP_ASSIGN(loop_lpv0, _lpv0._class)
GetCustomerPreferences/CustomerPreferencesData/CustomerPreferences/PreferenceCd=LOOP_ASSIGN(loop_lpv0, _lpv0.preferenceId)
GetCustomerPreferences/CustomerPreferencesData/CustomerPreferences/PreferenceTypeCd=LOOP_ASSIGN(loop_lpv0, _lpv0.type)
GetCustomerPreferences/CustomerPreferencesData/CustomerPreferences/PreferenceTypeDsc=
GetCustomerPreferences/CustomerPreferencesData/CustomerPreferences/PreferenceVal=LOOP_ASSIGN(loop_lpv0, _lpv0.value)
GetCustomerPreferences/CustomerPreferencesData/CustomerPreferences/PreferenceCategoryCd=LOOP_ASSIGN(loop_lpv0, _lpv0.categoryCode)
GetCustomerPreferences/CustomerPreferencesData/CustomerPreferences/PreferenceSubCategoryCd=LOOP_ASSIGN(loop_lpv0, _lpv0.subCategoryCode)
GetCustomerPreferences/CustomerPreferencesData/CustomerPreferences/OptChoice=construct().loop(loop_lpv1, _lpv0.optChoices[*], _lpv1)
GetCustomerPreferences/CustomerPreferencesData/CustomerPreferences/OptChoice/ChoiceDsc=LOOP_ASSIGN(loop_lpv1, _lpv1.choice)
GetCustomerPreferences/CustomerPreferencesData/CustomerPreferences/OptChoice/OptChoiceInd=
GetCustomerPreferences/CustomerPreferencesData/CustomerPreferences/OptChoice/ReasonCd=LOOP_ASSIGN(loop_lpv1, _lpv1.reasonCode)
GetCustomerPreferences/CustomerPreferencesData/CustomerPreferences/OptChoice/ReasonDsc=LOOP_ASSIGN(loop_lpv1, _lpv1.reasonText)
GetCustomerPreferences/CustomerPreferencesData/CustomerPreferences/OptChoice/SelectTs=
GetCustomerPreferences/CustomerPreferencesData/CustomerPreferences/BannerCd=LOOP_ASSIGN(loop_lpv0, _lpv0.bannerId)
GetCustomerPreferences/CustomerPreferencesData/CustomerPreferences/PreferredInd=LOOP_ASSIGN(loop_lpv0, _lpv0.preferredInd)
GetCustomerPreferences/CustomerPreferencesData/CustomerPreferences/ChannelTypCd=LOOP_ASSIGN(loop_lpv0, _lpv0.channel.type)
GetCustomerPreferences/CustomerPreferencesData/CustomerPreferences/PlatformTypCd=LOOP_ASSIGN(loop_lpv0, _lpv0.platform.type)
GetCustomerPreferences/CustomerPreferencesData/CustomerPreferences/PreferenceEffectivePeriod=construct().loop(loop_lpv2, _lpv0.effectiveTimePeriods[*], _lpv2)
GetCustomerPreferences/CustomerPreferencesData/CustomerPreferences/PreferenceEffectivePeriod/@typeCode=LOOP_ASSIGN(loop_lpv2, _lpv2.type)
GetCustomerPreferences/CustomerPreferencesData/CustomerPreferences/PreferenceEffectivePeriod/FirstEffectiveDt=LOOP_ASSIGN(loop_lpv2, _lpv2.startDate)
GetCustomerPreferences/CustomerPreferencesData/CustomerPreferences/PreferenceEffectivePeriod/FirstEffectiveTm=LOOP_ASSIGN(loop_lpv2, _lpv2.startTime)
GetCustomerPreferences/CustomerPreferencesData/CustomerPreferences/PreferenceEffectivePeriod/LastEffectiveDt=LOOP_ASSIGN(loop_lpv2, _lpv2.endDate)
GetCustomerPreferences/CustomerPreferencesData/CustomerPreferences/PreferenceEffectivePeriod/LastEffectiveTm=LOOP_ASSIGN(loop_lpv2, _lpv2.endTime)
GetCustomerPreferences/CustomerPreferencesData/CustomerPreferences/PreferenceEffectivePeriod/DurationNbr=LOOP_ASSIGN(loop_lpv2, _lpv2.duration)
GetCustomerPreferences/CustomerPreferencesData/CustomerPreferences/PreferenceEffectivePeriod/DurationUnitDsc=LOOP_ASSIGN(loop_lpv2, _lpv2.duration)
GetCustomerPreferences/CustomerPreferencesData/CustomerPreferences/PreferenceEffectivePeriod/InclusiveInd=LOOP_ASSIGN(loop_lpv2, _lpv2.inclusiveInd)
GetCustomerPreferences/CustomerPreferencesData/CustomerPreferences/CustomerSubscriptions=construct()
GetCustomerPreferences/CustomerPreferencesData/CustomerPreferences/CustomerSubscriptions/SubscriptionId=LOOP_ASSIGN(loop_lpv0, _lpv0.value)
GetCustomerPreferences/CustomerPreferencesData/CustomerPreferences/CustomerSubscriptions/SubscriptionCd=LOOP_ASSIGN(loop_lpv0, _lpv0.subCategoryCode)
GetCustomerPreferences/CustomerPreferencesData/CustomerPreferences/CustomerSubscriptions/SubscriptionTypeCd=LOOP_ASSIGN(loop_lpv0, _lpv0.type)
GetCustomerPreferences/CustomerPreferencesData/CustomerPreferences/CustomerSubscriptions/SubscriptionDsc=
GetCustomerPreferences/CustomerPreferencesData/CustomerPreferences/CustomerSubscriptions/OptChoice=construct().loop(loop_lpv3, _lpv0.optChoices[*], _lpv3)
GetCustomerPreferences/CustomerPreferencesData/CustomerPreferences/CustomerSubscriptions/OptChoice/ChoiceDsc=LOOP_ASSIGN(loop_lpv3, _lpv3.choice)
GetCustomerPreferences/CustomerPreferencesData/CustomerPreferences/CustomerSubscriptions/OptChoice/OptChoiceInd=
GetCustomerPreferences/CustomerPreferencesData/CustomerPreferences/CustomerSubscriptions/OptChoice/ReasonCd=LOOP_ASSIGN(loop_lpv3, _lpv3.reasonCode)
GetCustomerPreferences/CustomerPreferencesData/CustomerPreferences/CustomerSubscriptions/OptChoice/ReasonDsc=LOOP_ASSIGN(loop_lpv3, _lpv3.reasonText)

GetCustomerPreferences/CustomerPreferencesData/CustomerPreferences/CustomerSubscriptions/OptChoice/SelectTs=
GetCustomerPreferences/CustomerPreferencesData/CustomerPreferences/CustomerSubscriptions/DeliverySubscription=construct()
GetCustomerPreferences/CustomerPreferencesData/CustomerPreferences/CustomerSubscriptions/DeliverySubscription/ServiceFeeWaivedInd=LOOP_ASSIGN(loop_lpv0, _lpv0.deliverySubscriptionOffer.serviceFeeWaived)
GetCustomerPreferences/CustomerPreferencesData/CustomerPreferences/CustomerSubscriptions/DeliverySubscription/DeliveryFeeWaivedInd=LOOP_ASSIGN(loop_lpv0, _lpv0.deliverySubscriptionOffer.deliveryFeeWaived)
GetCustomerPreferences/CustomerPreferencesData/CustomerPreferences/CustomerSubscriptions/DeliverySubscription/FuelSurchargeWaivedInd=LOOP_ASSIGN(loop_lpv0, _lpv0.deliverySubscriptionOffer.fuelSurchargeWaived)
GetCustomerPreferences/CustomerPreferencesData/CustomerPreferences/CustomerSubscriptions/DeliverySubscription/MinimumBasketSizeQty=LOOP_ASSIGN(loop_lpv0, _lpv0.deliverySubscriptionOffer.minBasketSize)
GetCustomerPreferences/CustomerPreferencesData/CustomerPreferences/CustomerSubscriptions/DeliverySubscription/AutoRenewInd=LOOP_ASSIGN(loop_lpv0, _lpv0.autoRenew)
GetCustomerPreferences/CustomerPreferencesData/CustomerPreferences/CustomerSubscriptions/DeliverySubscription/AutoEnrollInd=LOOP_ASSIGN(loop_lpv0, _lpv0.autoEnroll)
GetCustomerPreferences/CustomerPreferencesData/CustomerPreferences/CustomerSubscriptions/DeliverySubscription/Fee=
GetCustomerPreferences/CustomerPreferencesData/CustomerPreferences/CustomerSubscriptions/DeliverySubscription/Fee/@CurrencyCd=
GetCustomerPreferences/CustomerPreferencesData/CustomerPreferences/CustomerSubscriptions/DeliverySubscription/Fee/@FeeAmt=
GetCustomerPreferences/CustomerPreferencesData/CustomerPreferences/CustomerSubscriptions/DeliverySubscription/InitialOrderAmountOff=construct()
GetCustomerPreferences/CustomerPreferencesData/CustomerPreferences/CustomerSubscriptions/DeliverySubscription/InitialOrderAmountOff/@CurrencyCd=ASSIGN($.state.preferences.deliverySubscriptionOffer.initialOrderAmountOff.currency)
GetCustomerPreferences/CustomerPreferencesData/CustomerPreferences/CustomerSubscriptions/DeliverySubscription/InitialOrderAmountOff/@DiscountAmt=
GetCustomerPreferences/CustomerPreferencesData/CustomerPreferences/CustomerSubscriptions/DeliverySubscription/SignupFee=
GetCustomerPreferences/CustomerPreferencesData/CustomerPreferences/CustomerSubscriptions/DeliverySubscription/SignupFee/@CurrencyCd=
GetCustomerPreferences/CustomerPreferencesData/CustomerPreferences/CustomerSubscriptions/DeliverySubscription/SignupFee/@FeeAmt=
GetCustomerPreferences/CustomerPreferencesData/SourceAuditData=construct()
GetCustomerPreferences/CustomerPreferencesData/SourceAuditData/SourceNm=ASSIGN($.aggregateType)
GetCustomerPreferences/CustomerPreferencesData/SourceAuditData/CreateTs=ASSIGN($.state.createTimestamp)
GetCustomerPreferences/CustomerPreferencesData/SourceAuditData/LastUpdateTs=ASSIGN($.state.lastUpdateTimestamp)
GetCustomerPreferences/CustomerPreferencesData/SourceAuditData/CreateClientId=ASSIGN($.state.createClientId)
GetCustomerPreferences/CustomerPreferencesData/SourceAuditData/CreateUserId=ASSIGN($.state.createUserId)
GetCustomerPreferences/CustomerPreferencesData/SourceAuditData/LastUpdateClientId=ASSIGN($.state.lastUpdateClientId)
GetCustomerPreferences/CustomerPreferencesData/SourceAuditData/LastUpdateUserId=ASSIGN($.state.lastUpdateUserId)
GetCustomerPreferences/CustomerPreferencesData/SourceAuditData/CreateHostNm=ASSIGN($.state.createHostName)
GetCustomerPreferences/CustomerPreferencesData/SourceAuditData/LastUpdateHostNm=ASSIGN($.state.lastUpdateHostName)
GetCustomerPreferences/CustomerPreferencesData/SourceAuditData/SequenceNbr=ASSIGN($.state.sequenceNumber)
GetCustomerPreferences/CustomerPreferencesData/SourceAuditData/AggregateTs=ASSIGN($.state.timestamp)
GetCustomerPreferences/CustomerPreferencesData/SourceAuditData/AggregateRevisionNbr=ASSIGN($.state.aggregateRevision)
GetCustomerPreferences/CustomerPreferencesData/SourceAuditData/PayloadVersionNbr=ASSIGN($.state.version)
GetCustomerPreferences/CustomerPreferencesData/SourceAuditData/EventId=ASSIGN($.state.eventId)

