GetCustomerPreferences=
GetCustomerPreferences/DocumentData=
GetCustomerPreferences/DocumentData/Document=
#GetCustomerPreferences/DocumentData/Document/@ReleaseId=
GetCustomerPreferences/DocumentData/Document/@VersionId=ASSIGN(VERSION_ID)
GetCustomerPreferences/DocumentData/Document/@SystemEnvironmentCd=ASSIGN(SYSTEM_ENVIRONMENT_CODE)
GetCustomerPreferences/DocumentData/Document/DocumentID=DEFAULT('CUSTOMER_PREFERENCES_MANAGEMENT')
GetCustomerPreferences/DocumentData/Document/AlternateDocumentID=DEFAULT('IAUC_C02.cfms.aggregate-' || CAST(CURRENT_TIMESTAMP AS CHARACTER FORMAT 'YYYYMMddHHmmssSSSSSS'))
GetCustomerPreferences/DocumentData/Document/InboundOutboundInd=DEFAULT('Outbound from Albertsons')
GetCustomerPreferences/DocumentData/Document/DocumentNm=DEFAULT('GetCustomerPreferences')
GetCustomerPreferences/DocumentData/Document/CreationDt=ASSIGN(CURRENT_TIMESTAMP)
GetCustomerPreferences/DocumentData/Document/Description=DEFAULT('Retail customer''s generic preferences and the subscriptions')
GetCustomerPreferences/DocumentData/Document/SourceApplicationCd=DEFAULT('CFMS')
GetCustomerPreferences/DocumentData/Document/TargetApplicationCd=DEFAULT('EDIS')
# GetCustomerPreferences/DocumentData/Document/Note=
# GetCustomerPreferences/DocumentData/Document/GatewayNm=
# GetCustomerPreferences/DocumentData/Document/SenderId=
# GetCustomerPreferences/DocumentData/Document/ReceiverId=
# GetCustomerPreferences/DocumentData/Document/RoutingSystemNm=
GetCustomerPreferences/DocumentData/Document/InternalFileTransferInd=DEFAULT('Y')
# GetCustomerPreferences/DocumentData/Document/InterchangeDate=
# GetCustomerPreferences/DocumentData/Document/InterchangeTime=
# GetCustomerPreferences/DocumentData/Document/ExternalTargetInd=
# GetCustomerPreferences/DocumentData/Document/MessageSequenceNbr=
# GetCustomerPreferences/DocumentData/Document/ExpectedMessageCnt=
GetCustomerPreferences/DocumentData/Document/DataClassification=
GetCustomerPreferences/DocumentData/Document/DataClassification/DataClassificationLevel=
GetCustomerPreferences/DocumentData/Document/DataClassification/DataClassificationLevel/Code=DEFAULT('Internal')
# GetCustomerPreferences/DocumentData/Document/DataClassification/DataClassificationLevel/Description=
# GetCustomerPreferences/DocumentData/Document/DataClassification/DataClassificationLevel/ShortDescription=
GetCustomerPreferences/DocumentData/Document/DataClassification/BusinessSensitivityLevel=
GetCustomerPreferences/DocumentData/Document/DataClassification/BusinessSensitivityLevel/Code=DEFAULT('Low')
# GetCustomerPreferences/DocumentData/Document/DataClassification/BusinessSensitivityLevel/Description=
# GetCustomerPreferences/DocumentData/Document/DataClassification/BusinessSensitivityLevel/ShortDescription=
GetCustomerPreferences/DocumentData/Document/DataClassification/PHIdataInd=DEFAULT('N')
GetCustomerPreferences/DocumentData/Document/DataClassification/PCIdataInd=DEFAULT('N')
GetCustomerPreferences/DocumentData/Document/DataClassification/PIIdataInd=DEFAULT('N')
GetCustomerPreferences/DocumentData/DocumentAction=
GetCustomerPreferences/DocumentData/DocumentAction/ActionTypeCd=DEFAULT('UPDATE')
GetCustomerPreferences/DocumentData/DocumentAction/RecordTypeCd=DEFAULT('CHANGE')

GetCustomerPreferences/CustomerPreferencesData=
GetCustomerPreferences/CustomerPreferencesData/CustomerId=ASSIGN($.aggregateId)
# GetCustomerPreferences/CustomerPreferencesData/CustomerAlternateId=
# GetCustomerPreferences/CustomerPreferencesData/CustomerAlternateId/@CodeType=
# GetCustomerPreferences/CustomerPreferencesData/CustomerAlternateId/@sequenceNbr=
# GetCustomerPreferences/CustomerPreferencesData/CustomerAlternateId/AlternateIdTxt=
# GetCustomerPreferences/CustomerPreferencesData/CustomerAlternateId/AlternateIdNbr=

GetCustomerPreferences/CustomerPreferencesData/CustomerPreferences=construct().loop(LOOP_STATE_PREFERENCES).from($.state.preferences[*]).var(_state_preference).end()
GetCustomerPreferences/CustomerPreferencesData/CustomerPreferences/PreferenceClassNm=ASSIGN(_state_preference._class)
GetCustomerPreferences/CustomerPreferencesData/CustomerPreferences/PreferenceCd=ASSIGN(_state_preference.preferenceId)
GetCustomerPreferences/CustomerPreferencesData/CustomerPreferences/PreferenceTypeCd=ASSIGN(_state_preference.type)
# GetCustomerPreferences/CustomerPreferencesData/CustomerPreferences/PreferenceTypeDsc=
GetCustomerPreferences/CustomerPreferencesData/CustomerPreferences/PreferenceVal=ASSIGN(_state_preference.value)
GetCustomerPreferences/CustomerPreferencesData/CustomerPreferences/PreferenceCategoryCd=ASSIGN(_state_preference.categoryCode)
GetCustomerPreferences/CustomerPreferencesData/CustomerPreferences/PreferenceSubCategoryCd=ASSIGN(_state_preference.subCategoryCode)

GetCustomerPreferences/CustomerPreferencesData/CustomerPreferences/OptChoice=construct().loop(LOOP_OPT_CHOICES).from(_state_preference.optChoices[*]).var(_opt_choice).end()
GetCustomerPreferences/CustomerPreferencesData/CustomerPreferences/OptChoice/ChoiceDsc=ASSIGN(_opt_choice.choice)
# GetCustomerPreferences/CustomerPreferencesData/CustomerPreferences/OptChoice/OptChoiceInd=
GetCustomerPreferences/CustomerPreferencesData/CustomerPreferences/OptChoice/ReasonCd=ASSIGN(_opt_choice.reasonCode)
GetCustomerPreferences/CustomerPreferencesData/CustomerPreferences/OptChoice/ReasonDsc=ASSIGN(_opt_choice.reasonText)
# GetCustomerPreferences/CustomerPreferencesData/CustomerPreferences/OptChoice/SelectTs=
GetCustomerPreferences/CustomerPreferencesData/CustomerPreferences/BannerCd=ASSIGN(_state_preference.bannerId)
GetCustomerPreferences/CustomerPreferencesData/CustomerPreferences/PreferredInd=ASSIGN(_state_preference.preferredInd)
GetCustomerPreferences/CustomerPreferencesData/CustomerPreferences/ChannelTypCd=ASSIGN(_state_preference.channel.type)
GetCustomerPreferences/CustomerPreferencesData/CustomerPreferences/PlatformTypCd=ASSIGN(_state_preference.platform.type)

GetCustomerPreferences/CustomerPreferencesData/CustomerPreferences/PreferenceEffectivePeriod=construct().loop(LOOP_PREF_EFF_TIME_PERIODS).from(_state_preference.effectiveTimePeriods[*]).var(_pref_eff_time_period).end()
# GetCustomerPreferences/CustomerPreferencesData/CustomerPreferences/PreferenceEffectivePeriod/@typeCode=ASSIGN(_pref_eff_time_period.type)
GetCustomerPreferences/CustomerPreferencesData/CustomerPreferences/PreferenceEffectivePeriod/FirstEffectiveDt=ASSIGN(_pref_eff_time_period.startDate)
GetCustomerPreferences/CustomerPreferencesData/CustomerPreferences/PreferenceEffectivePeriod/FirstEffectiveTm=ASSIGN(_pref_eff_time_period.startTime)
GetCustomerPreferences/CustomerPreferencesData/CustomerPreferences/PreferenceEffectivePeriod/LastEffectiveDt=ASSIGN(_pref_eff_time_period.endDate)
GetCustomerPreferences/CustomerPreferencesData/CustomerPreferences/PreferenceEffectivePeriod/LastEffectiveTm=ASSIGN(_pref_eff_time_period.endTime)
GetCustomerPreferences/CustomerPreferencesData/CustomerPreferences/PreferenceEffectivePeriod/DurationNbr=ASSIGN(_pref_eff_time_period.duration)
GetCustomerPreferences/CustomerPreferencesData/CustomerPreferences/PreferenceEffectivePeriod/DurationUnitDsc=ASSIGN(_pref_eff_time_period.duration)
GetCustomerPreferences/CustomerPreferencesData/CustomerPreferences/PreferenceEffectivePeriod/InclusiveInd=ASSIGN(_pref_eff_time_period.inclusiveInd)

GetCustomerPreferences/CustomerPreferencesData/CustomerSubscriptions=construct().loop(LOOP_CUSTOMER_SUBSCRIPTION).from($.state.preferences[*]).var(_preference).end()
GetCustomerPreferences/CustomerPreferencesData/CustomerSubscriptions/SubscriptionId=ASSIGN(_preference.value)
GetCustomerPreferences/CustomerPreferencesData/CustomerSubscriptions/SubscriptionCd=ASSIGN(_preference.subCategoryCode)
GetCustomerPreferences/CustomerPreferencesData/CustomerSubscriptions/SubscriptionTypeCd=ASSIGN(_preference.type)
# GetCustomerPreferences/CustomerPreferencesData/CustomerSubscriptions/SubscriptionDsc=

GetCustomerPreferences/CustomerPreferencesData/CustomerSubscriptions/OptChoice=construct().loop(LOOP_SUBSCRIPTION_CHOICES).from(_preference.optChoices[*]).var(_choice).end()
GetCustomerPreferences/CustomerPreferencesData/CustomerSubscriptions/OptChoice/ChoiceDsc=ASSIGN(_choice.choice)
# GetCustomerPreferences/CustomerPreferencesData/CustomerSubscriptions/OptChoice/OptChoiceInd=
GetCustomerPreferences/CustomerPreferencesData/CustomerSubscriptions/OptChoice/ReasonCd=ASSIGN(_choice.reasonCode)
GetCustomerPreferences/CustomerPreferencesData/CustomerSubscriptions/OptChoice/ReasonDsc=ASSIGN(_choice.reasonText)

# GetCustomerPreferences/CustomerPreferencesData/CustomerSubscriptions/OptChoice/SelectTs=
GetCustomerPreferences/CustomerPreferencesData/CustomerSubscriptions/DeliverySubscription=
GetCustomerPreferences/CustomerPreferencesData/CustomerSubscriptions/DeliverySubscription/ServiceFeeWaivedInd=ASSIGN(_preference.deliverySubscriptionOffer.serviceFeeWaived)
GetCustomerPreferences/CustomerPreferencesData/CustomerSubscriptions/DeliverySubscription/DeliveryFeeWaivedInd=ASSIGN(_preference.deliverySubscriptionOffer.deliveryFeeWaived)
GetCustomerPreferences/CustomerPreferencesData/CustomerSubscriptions/DeliverySubscription/FuelSurchargeWaivedInd=ASSIGN(_preference.deliverySubscriptionOffer.fuelSurchargeWaived)
GetCustomerPreferences/CustomerPreferencesData/CustomerSubscriptions/DeliverySubscription/MinimumBasketSizeQty=ASSIGN(_preference.deliverySubscriptionOffer.minBasketSize)
GetCustomerPreferences/CustomerPreferencesData/CustomerSubscriptions/DeliverySubscription/AutoRenewInd=ASSIGN(_preference.autoRenew)
GetCustomerPreferences/CustomerPreferencesData/CustomerSubscriptions/DeliverySubscription/AutoEnrollInd=ASSIGN(_preference.autoEnroll)
GetCustomerPreferences/CustomerPreferencesData/CustomerSubscriptions/DeliverySubscription/Fee=
GetCustomerPreferences/CustomerPreferencesData/CustomerSubscriptions/DeliverySubscription/Fee/@CurrencyCd=ASSIGN(_preference.deliverySubscriptionOffer.fee.currency)
GetCustomerPreferences/CustomerPreferencesData/CustomerSubscriptions/DeliverySubscription/Fee/@FeeAmt=ASSIGN(_preference.deliverySubscriptionOffer.fee.amount)
GetCustomerPreferences/CustomerPreferencesData/CustomerSubscriptions/DeliverySubscription/InitialOrderAmountOff=
GetCustomerPreferences/CustomerPreferencesData/CustomerSubscriptions/DeliverySubscription/InitialOrderAmountOff/@CurrencyCd=ASSIGN(_preference.deliverySubscriptionOffer.initialOrderAmountOff.currency)
# GetCustomerPreferences/CustomerPreferencesData/CustomerSubscriptions/DeliverySubscription/InitialOrderAmountOff/@DiscountAmt=
# GetCustomerPreferences/CustomerPreferencesData/CustomerSubscriptions/DeliverySubscription/SignupFee=
# GetCustomerPreferences/CustomerPreferencesData/CustomerSubscriptions/DeliverySubscription/SignupFee/@CurrencyCd=
# GetCustomerPreferences/CustomerPreferencesData/CustomerSubscriptions/DeliverySubscription/SignupFee/@FeeAmt=

GetCustomerPreferences/CustomerPreferencesData/CustomerSubscriptions/SubscriptionEffectivePeriod=construct().loop(LOOP_SUBSCRIPTION_EFF_TIME_PERIODS).from(_preference/effectiveTimePeriods[*]).var(_period).end()
GetCustomerPreferences/CustomerPreferencesData/CustomerSubscriptions/SubscriptionEffectivePeriod/@typeCode=ASSIGN(_period.type)
GetCustomerPreferences/CustomerPreferencesData/CustomerSubscriptions/SubscriptionEffectivePeriod/FirstEffectiveDt=ASSIGN(_period.startDate)
GetCustomerPreferences/CustomerPreferencesData/CustomerSubscriptions/SubscriptionEffectivePeriod/FirstEffectiveTm=ASSIGN(_period.startTime)
GetCustomerPreferences/CustomerPreferencesData/CustomerSubscriptions/SubscriptionEffectivePeriod/LastEffectiveDt=ASSIGN(_period.endDate)
GetCustomerPreferences/CustomerPreferencesData/CustomerSubscriptions/SubscriptionEffectivePeriod/LastEffectiveTm=ASSIGN(_period.endTime)
GetCustomerPreferences/CustomerPreferencesData/CustomerSubscriptions/SubscriptionEffectivePeriod/DurationNbr=ASSIGN(_period.duration)
GetCustomerPreferences/CustomerPreferencesData/CustomerSubscriptions/SubscriptionEffectivePeriod/DurationUnitDsc=ASSIGN(_period.duration)
GetCustomerPreferences/CustomerPreferencesData/CustomerSubscriptions/SubscriptionEffectivePeriod/InclusiveInd=ASSIGN(_period.inclusiveInd)

GetCustomerPreferences/CustomerPreferencesData/SourceAuditData=
GetCustomerPreferences/CustomerPreferencesData/SourceAuditData/SourceNm=ASSIGN($.aggregateType)
GetCustomerPreferences/CustomerPreferencesData/SourceAuditData/CreateTs=ASSIGN($.state.createTimestamp)
GetCustomerPreferences/CustomerPreferencesData/SourceAuditData/LastUpdateTs=ASSIGN($.state.lastUpdateTimestamp)
GetCustomerPreferences/CustomerPreferencesData/SourceAuditData/CreateClientId=ASSIGN($.state.createClientId)
GetCustomerPreferences/CustomerPreferencesData/SourceAuditData/CreateUserId=ASSIGN($.state.createUserId)
GetCustomerPreferences/CustomerPreferencesData/SourceAuditData/LastUpdateClientId=ASSIGN($.state.lastUpdateClientId)
GetCustomerPreferences/CustomerPreferencesData/SourceAuditData/LastUpdateUserId=ASSIGN($.state.lastUpdateUserId)
GetCustomerPreferences/CustomerPreferencesData/SourceAuditData/CreateHostNm=ASSIGN($.state.createHostName)
GetCustomerPreferences/CustomerPreferencesData/SourceAuditData/LastUpdateHostNm=ASSIGN($.state.lastUpdateHostName)
GetCustomerPreferences/CustomerPreferencesData/SourceAuditData/SequenceNbr=ASSIGN($.state.sequenceNumber)
GetCustomerPreferences/CustomerPreferencesData/SourceAuditData/AggregateTs=ASSIGN($.state.timestamp)
GetCustomerPreferences/CustomerPreferencesData/SourceAuditData/AggregateRevisionNbr=ASSIGN($.state.aggregateRevision)
GetCustomerPreferences/CustomerPreferencesData/SourceAuditData/PayloadVersionNbr=ASSIGN($.state.version)
GetCustomerPreferences/CustomerPreferencesData/SourceAuditData/EventId=ASSIGN($.state.eventId)
